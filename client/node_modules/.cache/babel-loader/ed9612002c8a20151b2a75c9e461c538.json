{"ast":null,"code":"import _toConsumableArray from\"/var/www/Exercise_Logger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/var/www/Exercise_Logger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Button,Form,Modal,ListGroup}from\"react-bootstrap\";import{FcPlus}from\"react-icons/fc\";import{useAuth0}from\"@auth0/auth0-react\";import{Link,useLocation}from\"react-router-dom\";import CustomTable from\"../partials/CustomTable\";import EditableTable from\"../partials/EditableTable\";import Truncate from\"react-truncate\";var ViewLogList=function ViewLogList(_ref){var auth=_ref.auth,config=_ref.config;var location=useLocation();var _useAuth=useAuth0(),user=_useAuth.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),isLogList=_useState2[0],SetLogList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),isDisplayList=_useState4[0],SetDisplayList=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isShown=_useState6[0],SetShown=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),isTitle=_useState8[0],SetTitle=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),isDesc=_useState10[0],SetDesc=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),isDeleteList=_useState12[0],SetDeleteList=_useState12[1];useEffect(function(){if(config.id===\"exercise\"){SetDesc({desc:\"\",set:[1],reps:[1],weight:[1]});}axios.get(\"/api/\".concat(config.origin)).then(function(res){if(res.data.length>0){res.data.forEach(function(el){console.log(el.username,\":\",user.email);if(el.username===user.email){if(config.id===\"exercise\"){el.exercises.forEach(function(params){var displaylist=[[],[],{html:[]},[]];var _loop=function _loop(key){if(params.hasOwnProperty(key)){if(key===\"_id\"){displaylist[0]=params[key];}else if(key===\"name\"){displaylist[1]=params[key];}else if([\"description\",\"set\",\"reps\",\"weight\"].includes(key)){if(key===\"description\"){displaylist[2].html.push(/*#__PURE__*/React.createElement(ListGroup.Item,{className:\"text-black-50\"},key,/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(Truncate,{line:2,element:\"span\"},params[key]))));}else displaylist[2].html.push(/*#__PURE__*/React.createElement(ListGroup.Item,{className:\"text-black-50\",key:\"list-group-html\"+key},key,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},Object.entries(params[key]).map(function(li,item){return/*#__PURE__*/React.createElement(\"span\",{className:\"inline-block col p-2\",key:key},params[key][item]);}))));}else if(key===\"date\"){displaylist[3]=params[key];}}};for(var key in params){_loop(key);}SetLogList(function(isLogList){return[].concat(_toConsumableArray(isLogList),[displaylist.shift()]);});SetDisplayList(function(isDisplayList){return[].concat(_toConsumableArray(isDisplayList),[displaylist]);});});}else{SetLogList(function(isLogList){return[].concat(_toConsumableArray(isLogList),[el._id]);});SetDisplayList(function(isDisplayList){return[].concat(_toConsumableArray(isDisplayList),[[/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/logs\",search:\"\".concat(el.title),state:{auth:auth,logTitle:el.title,logId:el._id}}},el.title),el.description,el.date]]);});}}});}});},[]);var deleteData=function deleteData(bool){if(bool){var idList=[];isDeleteList.forEach(function(li){idList.push(isLogList[li]);});idList.forEach(function(el){if(config.id===\"exercise\"){//update existing log\naxios({method:\"post\",url:\"/api/\".concat(config.origin,\"/\").concat(config.update,\"/\").concat(location.state.logId),header:{},data:{itemid:el,date:new Date()}}).then(function(res){console.log(res.data);window.location.reload();}).catch(function(err){return console.log(err);});}else{//delete log\naxios.delete(\"/api/\".concat(config.origin,\"/\").concat(el)).then(function(res){window.location.reload();}).catch(function(err){return console.log(err);});}});}};var SetExerciseDescription=function SetExerciseDescription(state){SetDesc({desc:isDesc.desc,set:state.set,reps:state.reps,weight:state.weight});};var handleSubmit=function handleSubmit(){SetShown(!isShown);var date=new Date();if(config.id===\"exercise\"){axios.post(\"/api/\".concat(config.origin,\"/\").concat(config.post,\"/\").concat(location.state.logId),{username:user.email,title:location.state.logTitle,name:isTitle,description:isDesc.desc,set:isDesc.set,reps:isDesc.reps,weight:isDesc.weight,date:date}).then(function(response){console.log(response);window.location.reload();}).catch(function(err){console.log(err);});}else{axios.post(\"/api/\".concat(config.origin,\"/\").concat(config.post),{username:user.email,title:isTitle,description:isDesc,date:date}).then(function(response){console.log(response);window.location.reload();}).catch(function(err){console.log(err);});}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"table-view container-fluid justify-content-around\",style:{color:\"white\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"page-header\"},config.id===\"exercise\"?/*#__PURE__*/React.createElement(\"h1\",null,location.state.logTitle):/*#__PURE__*/React.createElement(\"h1\",null,config.title)),/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CustomTable,{thead:config.thead,data:isDisplayList,SetDeleteList:SetDeleteList,SetRemoval:deleteData,warning:true})),/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal,{show:isShown,onHide:function onHide(){SetShown(true);},size:\"lg\"},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,config.modal.title)),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Label,null,config.modal.group[0]),/*#__PURE__*/React.createElement(Form.Control,{placeholder:\"Enter Name/Title\",type:\"text\",id:\"log-title\",onChange:function onChange(e){SetTitle(e.target.value);}}),/*#__PURE__*/React.createElement(Form.Label,null,config.modal.group[1]),/*#__PURE__*/React.createElement(Form.Control,{as:\"textarea\",type:\"text\",rows:\"5\",placeholder:\"Enter Description\",id:\"log-desc\",onChange:function onChange(e){SetDesc(config.id===\"exercise\"?{desc:e.target.value}:e.target.value);}}),config.id===\"exercise\"&&/*#__PURE__*/React.createElement(\"div\",{className:\"pt-5\"},/*#__PURE__*/React.createElement(EditableTable,{thead:[\"Set\",\"Reps\",\"Weight\"],SetData:SetExerciseDescription,style:{color:\"black\"}}))))),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:function onClick(){SetShown(!isShown);}},\"Close\"),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:handleSubmit},\"Save changes\")))),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex d-inline-flex\"},/*#__PURE__*/React.createElement(\"button\",{style:{borderRadius:\"10vw\",background:\"none\",borderStyle:\"hidden\"},onClick:function onClick(){SetShown(!isShown);}},/*#__PURE__*/React.createElement(FcPlus,{size:\"2em\"})),/*#__PURE__*/React.createElement(\"br\",null),config.id===\"exercise\"?/*#__PURE__*/React.createElement(\"span\",{className:\"p-2 font-weight-bold\"},\"Add Exercise\"):/*#__PURE__*/React.createElement(\"span\",{className:\"p-2 font-weight-bold\"},\"Add Log\"))));};export default ViewLogList;","map":{"version":3,"sources":["/var/www/Exercise_Logger/client/src/components/log/ViewLogList.js"],"names":["React","useState","useEffect","axios","Button","Form","Modal","ListGroup","FcPlus","useAuth0","Link","useLocation","CustomTable","EditableTable","Truncate","ViewLogList","auth","config","location","user","isLogList","SetLogList","isDisplayList","SetDisplayList","isShown","SetShown","isTitle","SetTitle","isDesc","SetDesc","isDeleteList","SetDeleteList","id","desc","set","reps","weight","get","origin","then","res","data","length","forEach","el","console","log","username","email","exercises","params","displaylist","html","key","hasOwnProperty","includes","push","Object","entries","map","li","item","shift","_id","pathname","search","title","state","logTitle","logId","description","date","deleteData","bool","idList","method","url","update","header","itemid","Date","window","reload","catch","err","delete","SetExerciseDescription","handleSubmit","post","name","response","color","thead","modal","group","e","target","value","borderRadius","background","borderStyle"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Button, Form, Modal, ListGroup } from \"react-bootstrap\";\nimport { FcPlus } from \"react-icons/fc\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport CustomTable from \"../partials/CustomTable\";\nimport EditableTable from \"../partials/EditableTable\";\nimport Truncate from \"react-truncate\";\nconst ViewLogList = ({ auth, config }) => {\n  const location = useLocation();\n  const { user } = useAuth0();\n\n  const [isLogList, SetLogList] = useState([]);\n  const [isDisplayList, SetDisplayList] = useState([]);\n  const [isShown, SetShown] = useState(false);\n\n  const [isTitle, SetTitle] = useState(\"\");\n  const [isDesc, SetDesc] = useState(\"\");\n  const [isDeleteList, SetDeleteList] = useState([]);\n\n  useEffect(() => {\n    if (config.id === \"exercise\") {\n      SetDesc({\n        desc: \"\",\n        set: [1],\n        reps: [1],\n        weight: [1],\n      });\n    }\n    axios.get(`/api/${config.origin}`).then((res) => {\n      if (res.data.length > 0) {\n        res.data.forEach((el) => {\n          console.log(el.username, \":\", user.email);\n          if (el.username === user.email) {\n            if (config.id === \"exercise\") {\n              el.exercises.forEach((params) => {\n                let displaylist = [[], [], { html: [] }, []];\n                for (let key in params) {\n                  if (params.hasOwnProperty(key)) {\n                    if (key === \"_id\") {\n                      displaylist[0] = params[key];\n                    } else if (key === \"name\") {\n                      displaylist[1] = params[key];\n                    } else if (\n                      [\"description\", \"set\", \"reps\", \"weight\"].includes(key)\n                    ) {\n                      if (key === \"description\") {\n                        displaylist[2].html.push(\n                          <ListGroup.Item className=\"text-black-50\">\n                            {key}\n                            <p>\n                              <Truncate line={2} element=\"span\">\n                                {params[key]}\n                              </Truncate>\n                            </p>\n                          </ListGroup.Item>\n                        );\n                      } else\n                        displaylist[2].html.push(\n                          <ListGroup.Item\n                            className=\"text-black-50\"\n                            key={\"list-group-html\" + key}\n                          >\n                            {key}\n                            {\n                              <div className={\"row\"}>\n                                {Object.entries(params[key]).map((li, item) => {\n                                  return (\n                                    <span\n                                      className={\"inline-block col p-2\"}\n                                      key={key}\n                                    >\n                                      {params[key][item]}\n                                    </span>\n                                  );\n                                })}\n                              </div>\n                            }\n                          </ListGroup.Item>\n                        );\n                    } else if (key === \"date\") {\n                      displaylist[3] = params[key];\n                    }\n                  }\n                }\n                SetLogList((isLogList) => [...isLogList, displaylist.shift()]);\n                SetDisplayList((isDisplayList) => [\n                  ...isDisplayList,\n                  displaylist,\n                ]);\n              });\n            } else {\n              SetLogList((isLogList) => [...isLogList, el._id]);\n              SetDisplayList((isDisplayList) => [\n                ...isDisplayList,\n                [\n                  <Link\n                    to={{\n                      pathname: \"/logs\",\n                      search: `${el.title}`,\n                      state: {\n                        auth: auth,\n                        logTitle: el.title,\n                        logId: el._id,\n                      },\n                    }}\n                  >\n                    {el.title}\n                  </Link>,\n                  el.description,\n                  el.date,\n                ],\n              ]);\n            }\n          }\n        });\n      }\n    });\n  }, []);\n\n  const deleteData = (bool) => {\n    if (bool) {\n      let idList = [];\n      isDeleteList.forEach((li) => {\n        idList.push(isLogList[li]);\n      });\n      idList.forEach((el) => {\n        if (config.id === \"exercise\") {\n          //update existing log\n          axios({\n            method: \"post\",\n            url: `/api/${config.origin}/${config.update}/${location.state.logId}`,\n            header: {},\n            data: {\n              itemid: el,\n              date: new Date(),\n            },\n          })\n            .then((res) => {\n              console.log(res.data);\n              window.location.reload();\n            })\n            .catch((err) => console.log(err));\n        } else {\n          //delete log\n          axios\n            .delete(`/api/${config.origin}/${el}`)\n            .then((res) => {\n              window.location.reload();\n            })\n            .catch((err) => console.log(err));\n        }\n      });\n    }\n  };\n\n  const SetExerciseDescription = (state) => {\n    SetDesc({\n      desc: isDesc.desc,\n      set: state.set,\n      reps: state.reps,\n      weight: state.weight,\n    });\n  };\n\n  const handleSubmit = () => {\n    SetShown(!isShown);\n    let date = new Date();\n    if (config.id === \"exercise\") {\n      axios\n        .post(`/api/${config.origin}/${config.post}/${location.state.logId}`, {\n          username: user.email,\n          title: location.state.logTitle,\n          name: isTitle,\n          description: isDesc.desc,\n          set: isDesc.set,\n          reps: isDesc.reps,\n          weight: isDesc.weight,\n          date: date,\n        })\n        .then((response) => {\n          console.log(response);\n          window.location.reload();\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    } else {\n      axios\n        .post(`/api/${config.origin}/${config.post}`, {\n          username: user.email,\n          title: isTitle,\n          description: isDesc,\n          date: date,\n        })\n        .then((response) => {\n          console.log(response);\n          window.location.reload();\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  };\n  return (\n    <>\n      <div\n        className=\"table-view container-fluid justify-content-around\"\n        style={{ color: \"white\" }}\n      >\n        <div className=\"page-header\">\n          {config.id === \"exercise\" ? (\n            <h1>{location.state.logTitle}</h1>\n          ) : (\n            <h1>{config.title}</h1>\n          )}\n        </div>\n        <>\n          <CustomTable\n            thead={config.thead}\n            data={isDisplayList}\n            SetDeleteList={SetDeleteList}\n            SetRemoval={deleteData}\n            warning={true}\n          />\n        </>\n        <>\n          <Modal\n            show={isShown}\n            onHide={() => {\n              SetShown(true);\n            }}\n            size=\"lg\"\n          >\n            <Modal.Header closeButton>\n              <Modal.Title>{config.modal.title}</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n              <Form>\n                <Form.Group>\n                  <Form.Label>{config.modal.group[0]}</Form.Label>\n                  <Form.Control\n                    placeholder=\"Enter Name/Title\"\n                    type=\"text\"\n                    id=\"log-title\"\n                    onChange={(e) => {\n                      SetTitle(e.target.value);\n                    }}\n                  />\n                  <Form.Label>{config.modal.group[1]}</Form.Label>\n                  <Form.Control\n                    as=\"textarea\"\n                    type=\"text\"\n                    rows=\"5\"\n                    placeholder=\"Enter Description\"\n                    id=\"log-desc\"\n                    onChange={(e) => {\n                      SetDesc(\n                        config.id === \"exercise\"\n                          ? {\n                              desc: e.target.value,\n                            }\n                          : e.target.value\n                      );\n                    }}\n                  />\n                  {config.id === \"exercise\" && (\n                    <div className={\"pt-5\"}>\n                      <EditableTable\n                        thead={[\"Set\", \"Reps\", \"Weight\"]}\n                        SetData={SetExerciseDescription}\n                        style={{ color: \"black\" }}\n                      />\n                    </div>\n                  )}\n                </Form.Group>\n              </Form>\n            </Modal.Body>\n\n            <Modal.Footer>\n              <Button\n                variant=\"secondary\"\n                onClick={() => {\n                  SetShown(!isShown);\n                }}\n              >\n                Close\n              </Button>\n              <Button variant=\"primary\" onClick={handleSubmit}>\n                Save changes\n              </Button>\n            </Modal.Footer>\n          </Modal>\n        </>\n\n        <hr />\n        <div className=\"d-flex d-inline-flex\">\n          <button\n            style={{\n              borderRadius: \"10vw\",\n              background: \"none\",\n              borderStyle: \"hidden\",\n            }}\n            onClick={() => {\n              SetShown(!isShown);\n            }}\n          >\n            <FcPlus size={\"2em\"} />\n          </button>\n          <br />\n          {config.id === \"exercise\" ? (\n            <span className=\"p-2 font-weight-bold\">Add Exercise</span>\n          ) : (\n            <span className=\"p-2 font-weight-bold\">Add Log</span>\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\nexport default ViewLogList;\n"]},"metadata":{},"sourceType":"module"}