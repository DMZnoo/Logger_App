{"ast":null,"code":"var _jsxFileName = \"/Users/daniel/WebstormProjects/Exercise_App/Exercise_Logger/client/src/components/log/ViewLogList.js\";\nimport React, { useState, useEffect, createRef } from \"react\";\nimport axios from \"axios\";\nimport { Accordion, Card } from \"react-bootstrap\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport SetNewWorkout from \"./exercises/actions/create/SetNewWorkout\";\nimport ViewWorkoutList from \"./exercises/ViewWorkoutList\";\nimport NewLogList from \"./actions/create/NewLogList\";\nimport RemoveLogList from \"./actions/remove/RemoveLogList\";\nimport { isMobile } from \"react-device-detect\";\nimport Swipe from \"react-easy-swipe\";\nimport update from \"immutability-helper\";\nimport EditLogList from \"./actions/edit/EditLogList\";\nimport ToggleRemoval from \"../partials/ToggleRemoval\";\nimport ToggleEdit from \"../partials/ToggleEdit\";\n\nconst ViewLogList = () => {\n  const {\n    user,\n    isAuthenticated\n  } = useAuth0();\n  const [isShown, SetShown] = useState([]);\n  const [isEdit, SetEdit] = useState([]);\n  const [isDisplayList, SetDisplayList] = useState([]);\n  const [isCurrID, SetCurrID] = useState([]);\n  const [isDeleteList, SetDeleteList] = useState([]);\n  const [isDelete, SetDelete] = useState(false);\n  const [isSwipedRight, SetOnSwipeRight] = useState(false);\n  useEffect(() => {\n    if (isAuthenticated) {\n      axios.post(\"/api/users/\", {\n        username: user.email\n      }).then(res => {\n        if (res.data !== 0) {\n          fetchData(res.data);\n        }\n      }).catch(err => console.log(err));\n    }\n  }, []);\n\n  const fetchData = (log = null, update = false, newlog = false) => {\n    if (!update) {\n      Object.entries(log).forEach((id, index) => {\n        let logDesc = [];\n        Object.entries(id[1]).forEach((el, idx) => {\n          if (el[0] === \"_id\") SetCurrID(isCurrID => [...isCurrID, el[1]]);\n          if (el[0] !== \"__v\") logDesc.push(el);\n        });\n        SetDisplayList(isDisplayList => [...isDisplayList, logDesc]);\n        SetShown(isShown => [...isShown, false]);\n        SetEdit(isEdit => [...isEdit, false]);\n        SetDeleteList(isDeleteList => [...isDeleteList, createRef()]);\n      });\n    } else {\n      if (!newlog) {\n        let LogDesc = [];\n        Object.entries(log).forEach((el, idx) => {\n          LogDesc.push(el);\n        });\n        let index = isCurrID.indexOf(log._id);\n        SetDisplayList(isDisplayList => [...isDisplayList.slice(0, index), LogDesc, ...isDisplayList.slice(index + 1)]);\n      } else {\n        let LogDesc = [];\n        Object.entries(log).forEach((el, idx) => {\n          LogDesc.push(el);\n        });\n        SetDisplayList(isDisplayList => [...isDisplayList, LogDesc]);\n        SetShown(isShown => [...isShown, false]);\n        SetEdit(isEdit => [...isEdit, false]);\n        SetDeleteList(isDeleteList => [...isDeleteList, createRef()]);\n      }\n    }\n  };\n\n  const onDelete = () => {\n    SetDelete(!isDelete);\n  };\n\n  const onSwipeRight = (pos, event) => {\n    if (isDelete) {\n      SetOnSwipeRight(true);\n    }\n  };\n\n  const onSwipeEnd = event => {\n    if (isSwipedRight) {\n      handleDelete(Number(event.target.id.replace(/log-accordion-/g, \"\")));\n    }\n  };\n\n  const handleDelete = index => {\n    isDeleteList[index].current.classList.add(\"animate__animated\", \"animate__fadeOutRight\");\n    isDeleteList[index].current.addEventListener(\"animationend\", () => {\n      axios.delete(`api/logs/${isCurrID[index]}`).then(res => {\n        SetCurrID(isCurrID => [...isCurrID.slice(0, index), ...isCurrID.slice(index + 1)]);\n        SetDisplayList(isDisplayList => [...isDisplayList.slice(0, index), ...isDisplayList.slice(index + 1)]);\n        SetDeleteList(isDeleteList => [...isDeleteList.slice(0, index), ...isDeleteList.slice(index + 1)]);\n      }).catch(err => {\n        console.log(err);\n      });\n    });\n    SetOnSwipeRight(false);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, isDisplayList.map((el, index) => {\n    return /*#__PURE__*/React.createElement(Swipe, {\n      onSwipeRight: onSwipeRight,\n      onSwipeEnd: onSwipeEnd,\n      allowMouseEvents: true,\n      key: \"log-disp\" + index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Accordion, {\n      className: \"p-2\",\n      ref: isDeleteList[index],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(RemoveLogList, {\n      isDelete: isDelete,\n      index: index,\n      deleteData: handleDelete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 25\n      }\n    })), el.map(log => {\n      if (log[0] === \"title\") {\n        return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Accordion.Toggle, {\n          as: Card.Header,\n          eventKey: \"0\",\n          id: \"log-accordion-\" + `${index}`,\n          style: {\n            transition: \"1s\",\n            paddingLeft: !isDelete ? \"1vw\" : isMobile ? \"13vw\" : \"6vw\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 31\n          }\n        }, isEdit[index] ? /*#__PURE__*/React.createElement(\"div\", {\n          className: \"ml-2 form-group\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 35\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          for: `log-title-${index}`,\n          className: \"bmd-label-floating\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 37\n          }\n        }, \"New Title:\", \" \"), /*#__PURE__*/React.createElement(\"input\", {\n          id: `log-title-${index}`,\n          className: \"ml-2 form-control\",\n          size: 10,\n          placeholder: log[1],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 37\n          }\n        })) : /*#__PURE__*/React.createElement(\"div\", {\n          className: isMobile ? \"p-2\" : \"ml-3 d-flex\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 35\n          }\n        }, /*#__PURE__*/React.createElement(\"h5\", {\n          id: `log-title-${index}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 37\n          }\n        }, log[1]))));\n      } else if (log[0] === \"description\") {\n        return /*#__PURE__*/React.createElement(Accordion.Collapse, {\n          eventKey: !isDelete ? \"0\" : \"-1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(Card.Body, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 31\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"p-2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 33\n          }\n        }, isEdit[index] ? /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-group\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          for: `log-desc-${index}`,\n          className: \"bmd-label-floating\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 39\n          }\n        }, \"Log Description:\", \" \"), /*#__PURE__*/React.createElement(\"hr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 39\n          }\n        }), /*#__PURE__*/React.createElement(\"textarea\", {\n          id: `log-desc-${index}`,\n          cols: 20,\n          className: \"form-control\",\n          rows: 2,\n          placeholder: log[0] === \"description\" && log[1],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 39\n          }\n        })) : /*#__PURE__*/React.createElement(\"p\", {\n          id: `log-desc-${index}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 37\n          }\n        }, log[0] === \"description\" && log[1])), /*#__PURE__*/React.createElement(\"hr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 33\n          }\n        }), /*#__PURE__*/React.createElement(React.Fragment, null, isEdit[index] ? /*#__PURE__*/React.createElement(EditLogList, {\n          el: el,\n          index: index,\n          isCurrID: isCurrID,\n          isEdit: isEdit,\n          SetEdit: SetEdit,\n          updateData: fetchData,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 37\n          }\n        }) : /*#__PURE__*/React.createElement(ViewWorkoutList, {\n          el: el,\n          isCurrID: isCurrID,\n          updateData: fetchData,\n          logIndex: index,\n          user: user,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 37\n          }\n        })), /*#__PURE__*/React.createElement(SetNewWorkout, {\n          logIndex: index,\n          isShown: isShown,\n          SetShown: SetShown,\n          isCurrID: isCurrID,\n          updateData: fetchData,\n          user: user,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 33\n          }\n        }), /*#__PURE__*/React.createElement(ToggleEdit, {\n          isEdit: isEdit,\n          SetEdit: SetEdit,\n          index: index,\n          target: \"Log\",\n          multiple: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 33\n          }\n        })));\n      }\n    }))), /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 17\n      }\n    }, el.map(log => {\n      if (log[0] === \"date\") {\n        let date = new Date(log[1]);\n        return date.toDateString();\n      }\n    }))));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-inline-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(NewLogList, {\n    updateData: fetchData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ToggleRemoval, {\n    isDelete: isDelete,\n    onDelete: onDelete,\n    target: \"Log\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default ViewLogList;","map":{"version":3,"sources":["/Users/daniel/WebstormProjects/Exercise_App/Exercise_Logger/client/src/components/log/ViewLogList.js"],"names":["React","useState","useEffect","createRef","axios","Accordion","Card","useAuth0","SetNewWorkout","ViewWorkoutList","NewLogList","RemoveLogList","isMobile","Swipe","update","EditLogList","ToggleRemoval","ToggleEdit","ViewLogList","user","isAuthenticated","isShown","SetShown","isEdit","SetEdit","isDisplayList","SetDisplayList","isCurrID","SetCurrID","isDeleteList","SetDeleteList","isDelete","SetDelete","isSwipedRight","SetOnSwipeRight","post","username","email","then","res","data","fetchData","catch","err","console","log","newlog","Object","entries","forEach","id","index","logDesc","el","idx","push","LogDesc","indexOf","_id","slice","onDelete","onSwipeRight","pos","event","onSwipeEnd","handleDelete","Number","target","replace","current","classList","add","addEventListener","delete","map","Header","transition","paddingLeft","date","Date","toDateString"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, createRef } from \"react\";\nimport axios from \"axios\";\nimport { Accordion, Card } from \"react-bootstrap\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport SetNewWorkout from \"./exercises/actions/create/SetNewWorkout\";\nimport ViewWorkoutList from \"./exercises/ViewWorkoutList\";\nimport NewLogList from \"./actions/create/NewLogList\";\nimport RemoveLogList from \"./actions/remove/RemoveLogList\";\nimport { isMobile } from \"react-device-detect\";\nimport Swipe from \"react-easy-swipe\";\nimport update from \"immutability-helper\";\nimport EditLogList from \"./actions/edit/EditLogList\";\nimport ToggleRemoval from \"../partials/ToggleRemoval\";\nimport ToggleEdit from \"../partials/ToggleEdit\";\nconst ViewLogList = () => {\n  const { user, isAuthenticated } = useAuth0();\n  const [isShown, SetShown] = useState([]);\n  const [isEdit, SetEdit] = useState([]);\n  const [isDisplayList, SetDisplayList] = useState([]);\n  const [isCurrID, SetCurrID] = useState([]);\n  const [isDeleteList, SetDeleteList] = useState([]);\n  const [isDelete, SetDelete] = useState(false);\n  const [isSwipedRight, SetOnSwipeRight] = useState(false);\n  useEffect(() => {\n    if (isAuthenticated) {\n      axios\n        .post(\"/api/users/\", { username: user.email })\n        .then((res) => {\n          if (res.data !== 0) {\n            fetchData(res.data);\n          }\n        })\n        .catch((err) => console.log(err));\n    }\n  }, []);\n\n  const fetchData = (log = null, update = false, newlog = false) => {\n    if (!update) {\n      Object.entries(log).forEach((id, index) => {\n        let logDesc = [];\n        Object.entries(id[1]).forEach((el, idx) => {\n          if (el[0] === \"_id\") SetCurrID((isCurrID) => [...isCurrID, el[1]]);\n          if (el[0] !== \"__v\") logDesc.push(el);\n        });\n        SetDisplayList((isDisplayList) => [...isDisplayList, logDesc]);\n        SetShown((isShown) => [...isShown, false]);\n        SetEdit((isEdit) => [...isEdit, false]);\n        SetDeleteList((isDeleteList) => [...isDeleteList, createRef()]);\n      });\n    } else {\n      if (!newlog) {\n        let LogDesc = [];\n        Object.entries(log).forEach((el, idx) => {\n          LogDesc.push(el);\n        });\n        let index = isCurrID.indexOf(log._id);\n        SetDisplayList((isDisplayList) => [\n          ...isDisplayList.slice(0, index),\n          LogDesc,\n          ...isDisplayList.slice(index + 1),\n        ]);\n      } else {\n        let LogDesc = [];\n        Object.entries(log).forEach((el, idx) => {\n          LogDesc.push(el);\n        });\n        SetDisplayList((isDisplayList) => [...isDisplayList, LogDesc]);\n        SetShown((isShown) => [...isShown, false]);\n        SetEdit((isEdit) => [...isEdit, false]);\n        SetDeleteList((isDeleteList) => [...isDeleteList, createRef()]);\n      }\n    }\n  };\n\n  const onDelete = () => {\n    SetDelete(!isDelete);\n  };\n\n  const onSwipeRight = (pos, event) => {\n    if (isDelete) {\n      SetOnSwipeRight(true);\n    }\n  };\n  const onSwipeEnd = (event) => {\n    if (isSwipedRight) {\n      handleDelete(Number(event.target.id.replace(/log-accordion-/g, \"\")));\n    }\n  };\n\n  const handleDelete = (index) => {\n    isDeleteList[index].current.classList.add(\n      \"animate__animated\",\n      \"animate__fadeOutRight\"\n    );\n    isDeleteList[index].current.addEventListener(\"animationend\", () => {\n      axios\n        .delete(`api/logs/${isCurrID[index]}`)\n        .then((res) => {\n          SetCurrID((isCurrID) => [\n            ...isCurrID.slice(0, index),\n            ...isCurrID.slice(index + 1),\n          ]);\n          SetDisplayList((isDisplayList) => [\n            ...isDisplayList.slice(0, index),\n            ...isDisplayList.slice(index + 1),\n          ]);\n          SetDeleteList((isDeleteList) => [\n            ...isDeleteList.slice(0, index),\n            ...isDeleteList.slice(index + 1),\n          ]);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    });\n    SetOnSwipeRight(false);\n  };\n\n  return (\n    <>\n      <div>\n        {isDisplayList.map((el, index) => {\n          return (\n            <Swipe\n              onSwipeRight={onSwipeRight}\n              onSwipeEnd={onSwipeEnd}\n              allowMouseEvents={true}\n              key={\"log-disp\" + index}\n            >\n              <Accordion className={\"p-2\"} ref={isDeleteList[index]}>\n                <Card>\n                  {\n                    <>\n                      <>\n                        <RemoveLogList\n                          isDelete={isDelete}\n                          index={index}\n                          deleteData={handleDelete}\n                        />\n                      </>\n                      {el.map((log) => {\n                        if (log[0] === \"title\") {\n                          return (\n                            <>\n                              <Accordion.Toggle\n                                as={Card.Header}\n                                eventKey=\"0\"\n                                id={\"log-accordion-\" + `${index}`}\n                                style={{\n                                  transition: \"1s\",\n                                  paddingLeft: !isDelete\n                                    ? \"1vw\"\n                                    : isMobile\n                                    ? \"13vw\"\n                                    : \"6vw\",\n                                }}\n                              >\n                                {isEdit[index] ? (\n                                  <div className={\"ml-2 form-group\"}>\n                                    <label\n                                      for={`log-title-${index}`}\n                                      className=\"bmd-label-floating\"\n                                    >\n                                      New Title:{\" \"}\n                                    </label>\n                                    <input\n                                      id={`log-title-${index}`}\n                                      className={\"ml-2 form-control\"}\n                                      size={10}\n                                      placeholder={log[1]}\n                                    />\n                                  </div>\n                                ) : (\n                                  <div\n                                    className={isMobile ? \"p-2\" : \"ml-3 d-flex\"}\n                                  >\n                                    <h5 id={`log-title-${index}`}>{log[1]}</h5>\n                                  </div>\n                                )}\n                              </Accordion.Toggle>\n                            </>\n                          );\n                        } else if (log[0] === \"description\") {\n                          return (\n                            <Accordion.Collapse\n                              eventKey={!isDelete ? \"0\" : \"-1\"}\n                            >\n                              <Card.Body>\n                                <div className={\"p-2\"}>\n                                  {isEdit[index] ? (\n                                    <div className={\"form-group\"}>\n                                      <label\n                                        for={`log-desc-${index}`}\n                                        className=\"bmd-label-floating\"\n                                      >\n                                        Log Description:{\" \"}\n                                      </label>\n                                      <hr />\n                                      <textarea\n                                        id={`log-desc-${index}`}\n                                        cols={20}\n                                        className={\"form-control\"}\n                                        rows={2}\n                                        placeholder={\n                                          log[0] === \"description\" && log[1]\n                                        }\n                                      />\n                                    </div>\n                                  ) : (\n                                    <p id={`log-desc-${index}`}>\n                                      {log[0] === \"description\" && log[1]}\n                                    </p>\n                                  )}\n                                </div>\n                                <hr />\n                                <>\n                                  {isEdit[index] ? (\n                                    <EditLogList\n                                      el={el}\n                                      index={index}\n                                      isCurrID={isCurrID}\n                                      isEdit={isEdit}\n                                      SetEdit={SetEdit}\n                                      updateData={fetchData}\n                                    />\n                                  ) : (\n                                    <ViewWorkoutList\n                                      el={el}\n                                      isCurrID={isCurrID}\n                                      updateData={fetchData}\n                                      logIndex={index}\n                                      user={user}\n                                    />\n                                  )}\n                                </>\n                                <SetNewWorkout\n                                  logIndex={index}\n                                  isShown={isShown}\n                                  SetShown={SetShown}\n                                  isCurrID={isCurrID}\n                                  updateData={fetchData}\n                                  user={user}\n                                />\n                                <ToggleEdit\n                                  isEdit={isEdit}\n                                  SetEdit={SetEdit}\n                                  index={index}\n                                  target={\"Log\"}\n                                  multiple={true}\n                                />\n                              </Card.Body>\n                            </Accordion.Collapse>\n                          );\n                        }\n                      })}\n                    </>\n                  }\n                </Card>\n\n                <Card>\n                  {el.map((log) => {\n                    if (log[0] === \"date\") {\n                      let date = new Date(log[1]);\n                      return date.toDateString();\n                    }\n                  })}\n                </Card>\n              </Accordion>\n            </Swipe>\n          );\n        })}\n      </div>\n      <div className={\"d-inline-start\"}>\n        <NewLogList updateData={fetchData} />\n        <ToggleRemoval isDelete={isDelete} onDelete={onDelete} target={\"Log\"} />\n      </div>\n    </>\n  );\n};\nexport default ViewLogList;\n"]},"metadata":{},"sourceType":"module"}