{"ast":null,"code":"var _jsxFileName = \"/Users/daniel/WebstormProjects/Exercise_App/Exercise_Logger/client/src/components/log/ViewLogList.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Button, Accordion, Card, Table } from \"react-bootstrap\";\nimport { FcPlus } from \"react-icons/fc\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { BrowserView, MobileView } from \"react-device-detect\";\nimport EditableTable from \"../partials/EditableTable\";\n\nconst ViewLogList = () => {\n  const {\n    user,\n    isAuthenticated\n  } = useAuth0();\n  const [isShown, SetShown] = useState([]);\n  const [isDisplayList, SetDisplayList] = useState([]);\n  const [isNewExercise, SetNewExercise] = useState([]);\n  const [isCurrID, SetCurrID] = useState([]);\n  const [isNewLog, SetNewLog] = useState(null);\n  const [isWorkoutDesc, SetWorkoutDesc] = useState([]);\n  useEffect(() => {\n    if (isAuthenticated) {\n      fetchData();\n    }\n  }, []);\n\n  const fetchData = () => {\n    axios.get(`api/logs`).then(res => {\n      res.data.forEach((el, idx) => {\n        if (el.username === user.email) {\n          let currList = [];\n\n          for (let attr in el) {\n            if (el.hasOwnProperty(attr)) {\n              if (attr === \"_id\") SetCurrID(isCurrID => [...isCurrID, el[attr]]);\n              currList.push({\n                key: attr,\n                val: el[attr]\n              });\n            }\n          }\n\n          SetShown(isShown => [...isShown, false]);\n          SetDisplayList(isDisplayList => [...isDisplayList, currList]);\n        }\n      });\n    });\n  };\n\n  const SetExerciseDescription = (state, idx) => {\n    SetWorkoutDesc(isWorkoutDesc => [...isWorkoutDesc.slice(0, idx), state, ...isWorkoutDesc.slice(idx + 1)]);\n    console.log(isWorkoutDesc[idx]);\n  };\n\n  const handleDelete = (e, idx) => {\n    e.preventDefault();\n\n    if (isWorkoutDesc.set.length > 1) {\n      let newIndexArr = [];\n      isWorkoutDesc.set.forEach((el, index) => {\n        if (index > idx) {\n          newIndexArr.push(el - 1);\n        }\n      });\n      SetWorkoutDesc({\n        set: [...isWorkoutDesc.set.slice(0, idx), ...newIndexArr],\n        reps: [...isWorkoutDesc.reps.slice(0, idx), ...isWorkoutDesc.reps.slice(idx + 1)],\n        weight: [...isWorkoutDesc.weight.slice(0, idx), ...isWorkoutDesc.weight.slice(idx + 1)]\n      });\n    } else {\n      SetWorkoutDesc({\n        set: [...isWorkoutDesc.set.slice(0, idx), ...isWorkoutDesc.set.slice(idx + 1)],\n        reps: [...isWorkoutDesc.reps.slice(0, idx), ...isWorkoutDesc.reps.slice(idx + 1)],\n        weight: [...isWorkoutDesc.weight.slice(0, idx), ...isWorkoutDesc.weight.slice(idx + 1)]\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, isDisplayList.map((el, index) => {\n    return /*#__PURE__*/React.createElement(Accordion, {\n      key: \"log-disp\" + index,\n      className: \"p-2\",\n      defaultActiveKey: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(React.Fragment, null, Object.entries(el).map(log => {\n      if (log[1].key === \"title\") {\n        return /*#__PURE__*/React.createElement(Accordion.Toggle, {\n          as: Card.Header,\n          eventKey: \"0\",\n          id: \"log-title-\" + `${index}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 27\n          }\n        }, log[1].val);\n      } else if (log[1].key === \"description\") {\n        return /*#__PURE__*/React.createElement(Accordion.Collapse, {\n          eventKey: \"0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(Card.Body, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"p-2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 31\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          id: \"log-desc-\" + `${index}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 33\n          }\n        }, log[1].key === \"description\" && log[1].val)), /*#__PURE__*/React.createElement(React.Fragment, null, Object.entries(el).map(log => {\n          if (log[1].key === \"exercises\") {\n            return /*#__PURE__*/React.createElement(React.Fragment, null, log[1].val.map(ex => {\n              return /*#__PURE__*/React.createElement(\"div\", {\n                className: \"container\",\n                style: {\n                  overflowX: \"auto\"\n                },\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 45\n                }\n              }, /*#__PURE__*/React.createElement(\"h3\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 47\n                }\n              }, ex.name), /*#__PURE__*/React.createElement(Table, {\n                striped: true,\n                borderless: true,\n                variant: \"dark\",\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 47\n                }\n              }, /*#__PURE__*/React.createElement(\"thead\", {\n                className: \"thead-dark\",\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 49\n                }\n              }, /*#__PURE__*/React.createElement(\"tr\", {\n                id: \"table-thead-tr\",\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 51\n                }\n              }, /*#__PURE__*/React.createElement(\"th\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 53\n                }\n              }), /*#__PURE__*/React.createElement(\"th\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 53\n                }\n              }, \"Set\"), /*#__PURE__*/React.createElement(\"th\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 53\n                }\n              }, \"Reps\"), /*#__PURE__*/React.createElement(\"th\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 53\n                }\n              }, \"Weight\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 49\n                }\n              }, ex.set.map((set, idx) => {\n                return /*#__PURE__*/React.createElement(\"tr\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 55\n                  }\n                }, /*#__PURE__*/React.createElement(\"td\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 57\n                  }\n                }), /*#__PURE__*/React.createElement(\"td\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 57\n                  }\n                }, set), /*#__PURE__*/React.createElement(\"td\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 57\n                  }\n                }, ex.reps[idx]), /*#__PURE__*/React.createElement(\"td\", {\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 154,\n                    columnNumber: 57\n                  }\n                }, ex.weight[idx]));\n              }))));\n            }));\n          }\n        })), isShown[index] && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"p-2 ml-2 d-flex d-inline-flex\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 35\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          size: 25,\n          id: \"new-workout-name\" + `${index}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 37\n          }\n        })), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"container\",\n          style: {\n            overflowX: \"auto\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(BrowserView, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 39\n          }\n        }, /*#__PURE__*/React.createElement(EditableTable, {\n          index: index,\n          thead: [\"Set\", \"Reps\", \"Weight\"],\n          SetData: SetExerciseDescription,\n          style: {\n            color: \"black\",\n            width: \"100%\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 41\n          }\n        })), /*#__PURE__*/React.createElement(MobileView, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 39\n          }\n        }, /*#__PURE__*/React.createElement(EditableTable, {\n          index: index,\n          thead: [\"Set\", \"Reps\", \"Weight\"],\n          SetData: SetExerciseDescription,\n          style: {\n            color: \"black\",\n            width: \"inherit\",\n            fontSize: \"1.2vh\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 41\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex d-inline-flex\",\n          style: {\n            float: \"right\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 39\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          id: index,\n          className: \"p-2 mt-5\",\n          variant: \"outline-primary\",\n          onClick: e => {\n            // e.preventDefault();\n            let logTitle = document.getElementById(\"log-title-\" + `${e.target.id}`).innerText;\n            let exerciseName = document.querySelector(\"#new-workout-name\" + `${e.target.id}`).value;\n            let logDesc = document.getElementById(\"log-desc-\" + `${e.target.id}`).innerText;\n\n            if (exerciseName === null || exerciseName === \"\") {\n              alert(\"Please provide the name\");\n              return;\n            }\n\n            let date = new Date();\n            console.log(\"log title:\", logTitle, \"exercise: \", exerciseName, \"logDesc\", logDesc, isWorkoutDesc);\n            axios.post(`api/logs/add/${isCurrID[e.target.id]}`, {\n              username: user.email,\n              title: logTitle,\n              name: exerciseName,\n              description: logDesc,\n              set: isWorkoutDesc[e.target.id].set,\n              reps: isWorkoutDesc[e.target.id].reps,\n              weight: isWorkoutDesc[e.target.id].weight,\n              date: date\n            }).then(response => {\n              console.log(response);\n            }).catch(err => {\n              console.log(err);\n            });\n            window.location.reload();\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 41\n          }\n        }, \"Submit\"), /*#__PURE__*/React.createElement(Button, {\n          className: \"ml-2 mt-5\",\n          variant: \"outline-danger\",\n          onClick: e => {\n            e.preventDefault();\n            SetNewExercise(isNewExercise => [...isNewExercise.slice(0, index), ...isNewExercise.slice(index + 1)]);\n            SetShown(isShown => [...isShown.slice(0, index), false, ...isShown.slice(index + 1)]);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 41\n          }\n        }, \"Cancel\"))))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex d-inline-flex\",\n          style: {\n            textAlign: \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 31\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          id: index,\n          style: {\n            borderRadius: \"10vw\",\n            background: \"none\",\n            borderStyle: \"hidden\"\n          },\n          onClick: e => {\n            e.preventDefault();\n            SetShown(isShown => [...isShown.slice(0, index), true, ...isShown.slice(index + 1)]);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(FcPlus, {\n          size: \"2em\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 35\n          }\n        })), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 33\n          }\n        }), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"p-2 font-weight-bold\",\n          style: {\n            color: \"black\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 33\n          }\n        }, \"Add New Exercise\"))));\n      }\n    }))), /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 15\n      }\n    }, Object.entries(el).map(log => {\n      if (log[1].key === \"date\") {\n        return log[1].val;\n      }\n    })));\n  })), isNewLog, /*#__PURE__*/React.createElement(\"button\", {\n    style: {\n      borderRadius: \"10vw\",\n      background: \"none\",\n      borderStyle: \"hidden\"\n    },\n    onClick: e => {\n      e.preventDefault();\n      SetNewLog( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Accordion, {\n        className: \"p-2\",\n        defaultActiveKey: \"0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Card.Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 19\n        }\n      }, \"Title: \", /*#__PURE__*/React.createElement(\"input\", {\n        id: \"new-log-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 28\n        }\n      })), /*#__PURE__*/React.createElement(Accordion.Collapse, {\n        eventKey: \"0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Card.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 21\n        }\n      }, \"Description:\", \" \", /*#__PURE__*/React.createElement(\"textarea\", {\n        cols: 25,\n        rows: 10,\n        placeholder: \"Describe any additional notes regarding this log\",\n        id: \"new-log-desc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 23\n        }\n      }))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex d-inline-flex\",\n        style: {\n          float: \"right\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \"p-2\",\n        variant: \"outline-primary\",\n        onClick: e => {\n          e.preventDefault();\n\n          if (document.querySelector(\"#new-log-title\").value === \"\" || document.querySelector(\"#new-log-desc\").value === \"\") {\n            alert(\"All must be filled!\");\n          }\n\n          console.log(\"LOG TITLE\", document.querySelector(\"#new-log-title\").value);\n          console.log(\"LOG DESC\", document.querySelector(\"#new-log-desc\").value);\n          let date = new Date(); //add new log\n\n          axios.post(`api/logs/create`, {\n            username: user.email,\n            title: document.querySelector(\"#new-log-title\").value,\n            description: document.querySelector(\"#new-log-desc\").value,\n            date: date\n          }).then(response => {\n            window.location.reload();\n          }).catch(err => {\n            console.log(err);\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 17\n        }\n      }, \"Submit\"), /*#__PURE__*/React.createElement(Button, {\n        className: \"ml-2 mr-2\",\n        variant: \"outline-danger\",\n        onClick: e => {\n          e.preventDefault();\n          SetNewLog(null);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 17\n        }\n      }, \"Cancel\"))));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FcPlus, {\n    size: \"2em\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml-2 p-2 font-weight-bold\",\n    style: {\n      color: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 7\n    }\n  }, \"Add Log\"));\n};\n\nexport default ViewLogList;","map":{"version":3,"sources":["/Users/daniel/WebstormProjects/Exercise_App/Exercise_Logger/client/src/components/log/ViewLogList.js"],"names":["React","useState","useEffect","axios","Button","Accordion","Card","Table","FcPlus","useAuth0","BrowserView","MobileView","EditableTable","ViewLogList","user","isAuthenticated","isShown","SetShown","isDisplayList","SetDisplayList","isNewExercise","SetNewExercise","isCurrID","SetCurrID","isNewLog","SetNewLog","isWorkoutDesc","SetWorkoutDesc","fetchData","get","then","res","data","forEach","el","idx","username","email","currList","attr","hasOwnProperty","push","key","val","SetExerciseDescription","state","slice","console","log","handleDelete","e","preventDefault","set","length","newIndexArr","index","reps","weight","map","Object","entries","Header","ex","overflowX","name","color","width","fontSize","float","logTitle","document","getElementById","target","id","innerText","exerciseName","querySelector","value","logDesc","alert","date","Date","post","title","description","response","catch","err","window","location","reload","textAlign","borderRadius","background","borderStyle"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Button, Accordion, Card, Table } from \"react-bootstrap\";\nimport { FcPlus } from \"react-icons/fc\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { BrowserView, MobileView } from \"react-device-detect\";\nimport EditableTable from \"../partials/EditableTable\";\nconst ViewLogList = () => {\n  const { user, isAuthenticated } = useAuth0();\n\n  const [isShown, SetShown] = useState([]);\n  const [isDisplayList, SetDisplayList] = useState([]);\n  const [isNewExercise, SetNewExercise] = useState([]);\n  const [isCurrID, SetCurrID] = useState([]);\n  const [isNewLog, SetNewLog] = useState(null);\n  const [isWorkoutDesc, SetWorkoutDesc] = useState([]);\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      fetchData();\n    }\n  }, []);\n\n  const fetchData = () => {\n    axios.get(`api/logs`).then((res) => {\n      res.data.forEach((el, idx) => {\n        if (el.username === user.email) {\n          let currList = [];\n          for (let attr in el) {\n            if (el.hasOwnProperty(attr)) {\n              if (attr === \"_id\")\n                SetCurrID((isCurrID) => [...isCurrID, el[attr]]);\n              currList.push({ key: attr, val: el[attr] });\n            }\n          }\n          SetShown((isShown) => [...isShown, false]);\n          SetDisplayList((isDisplayList) => [...isDisplayList, currList]);\n        }\n      });\n    });\n  };\n\n  const SetExerciseDescription = (state, idx) => {\n    SetWorkoutDesc((isWorkoutDesc) => [\n      ...isWorkoutDesc.slice(0, idx),\n      state,\n      ...isWorkoutDesc.slice(idx + 1),\n    ]);\n\n    console.log(isWorkoutDesc[idx]);\n  };\n  const handleDelete = (e, idx) => {\n    e.preventDefault();\n    if (isWorkoutDesc.set.length > 1) {\n      let newIndexArr = [];\n      isWorkoutDesc.set.forEach((el, index) => {\n        if (index > idx) {\n          newIndexArr.push(el - 1);\n        }\n      });\n      SetWorkoutDesc({\n        set: [...isWorkoutDesc.set.slice(0, idx), ...newIndexArr],\n        reps: [\n          ...isWorkoutDesc.reps.slice(0, idx),\n          ...isWorkoutDesc.reps.slice(idx + 1),\n        ],\n        weight: [\n          ...isWorkoutDesc.weight.slice(0, idx),\n          ...isWorkoutDesc.weight.slice(idx + 1),\n        ],\n      });\n    } else {\n      SetWorkoutDesc({\n        set: [\n          ...isWorkoutDesc.set.slice(0, idx),\n          ...isWorkoutDesc.set.slice(idx + 1),\n        ],\n        reps: [\n          ...isWorkoutDesc.reps.slice(0, idx),\n          ...isWorkoutDesc.reps.slice(idx + 1),\n        ],\n        weight: [\n          ...isWorkoutDesc.weight.slice(0, idx),\n          ...isWorkoutDesc.weight.slice(idx + 1),\n        ],\n      });\n    }\n  };\n  return (\n    <>\n      <div>\n        {isDisplayList.map((el, index) => {\n          return (\n            <Accordion\n              key={\"log-disp\" + index}\n              className={\"p-2\"}\n              defaultActiveKey=\"0\"\n            >\n              <Card>\n                {\n                  <>\n                    {Object.entries(el).map((log) => {\n                      if (log[1].key === \"title\") {\n                        return (\n                          <Accordion.Toggle\n                            as={Card.Header}\n                            eventKey=\"0\"\n                            id={\"log-title-\" + `${index}`}\n                          >\n                            {log[1].val}\n                          </Accordion.Toggle>\n                        );\n                      } else if (log[1].key === \"description\") {\n                        return (\n                          <Accordion.Collapse eventKey=\"0\">\n                            <Card.Body>\n                              <div className={\"p-2\"}>\n                                <p id={\"log-desc-\" + `${index}`}>\n                                  {log[1].key === \"description\" && log[1].val}\n                                </p>\n                              </div>\n                              <>\n                                {Object.entries(el).map((log) => {\n                                  if (log[1].key === \"exercises\") {\n                                    return (\n                                      <>\n                                        {log[1].val.map((ex) => {\n                                          return (\n                                            <div\n                                              className={\"container\"}\n                                              style={{ overflowX: \"auto\" }}\n                                            >\n                                              <h3>{ex.name}</h3>\n                                              <Table\n                                                striped\n                                                borderless\n                                                variant={\"dark\"}\n                                              >\n                                                <thead className=\"thead-dark\">\n                                                  <tr id=\"table-thead-tr\">\n                                                    <th />\n                                                    <th>Set</th>\n                                                    <th>Reps</th>\n                                                    <th>Weight</th>\n                                                  </tr>\n                                                </thead>\n                                                <tbody>\n                                                  {ex.set.map((set, idx) => {\n                                                    return (\n                                                      <tr>\n                                                        <td></td>\n                                                        <td>{set}</td>\n                                                        <td>{ex.reps[idx]}</td>\n                                                        <td>\n                                                          {ex.weight[idx]}\n                                                        </td>\n                                                      </tr>\n                                                    );\n                                                  })}\n                                                </tbody>\n                                              </Table>\n                                            </div>\n                                          );\n                                        })}\n                                      </>\n                                    );\n                                  }\n                                })}\n                              </>\n                              {isShown[index] && (\n                                <>\n                                  <div\n                                    className={\"p-2 ml-2 d-flex d-inline-flex\"}\n                                  >\n                                    <input\n                                      size={25}\n                                      id={\"new-workout-name\" + `${index}`}\n                                    />\n                                  </div>\n                                  <>\n                                    <div\n                                      className={\"container\"}\n                                      style={{ overflowX: \"auto\" }}\n                                    >\n                                      <BrowserView>\n                                        <EditableTable\n                                          index={index}\n                                          thead={[\"Set\", \"Reps\", \"Weight\"]}\n                                          SetData={SetExerciseDescription}\n                                          style={{\n                                            color: \"black\",\n                                            width: \"100%\",\n                                          }}\n                                        />\n                                      </BrowserView>\n                                      <MobileView>\n                                        <EditableTable\n                                          index={index}\n                                          thead={[\"Set\", \"Reps\", \"Weight\"]}\n                                          SetData={SetExerciseDescription}\n                                          style={{\n                                            color: \"black\",\n                                            width: \"inherit\",\n                                            fontSize: \"1.2vh\",\n                                          }}\n                                        />\n                                      </MobileView>\n                                      <div\n                                        className={\"d-flex d-inline-flex\"}\n                                        style={{ float: \"right\" }}\n                                      >\n                                        <Button\n                                          id={index}\n                                          className={\"p-2 mt-5\"}\n                                          variant={\"outline-primary\"}\n                                          onClick={(e) => {\n                                            // e.preventDefault();\n                                            let logTitle = document.getElementById(\n                                              \"log-title-\" + `${e.target.id}`\n                                            ).innerText;\n                                            let exerciseName = document.querySelector(\n                                              \"#new-workout-name\" +\n                                                `${e.target.id}`\n                                            ).value;\n                                            let logDesc = document.getElementById(\n                                              \"log-desc-\" + `${e.target.id}`\n                                            ).innerText;\n                                            if (\n                                              exerciseName === null ||\n                                              exerciseName === \"\"\n                                            ) {\n                                              alert(\"Please provide the name\");\n                                              return;\n                                            }\n                                            let date = new Date();\n                                            console.log(\n                                              \"log title:\",\n                                              logTitle,\n                                              \"exercise: \",\n                                              exerciseName,\n                                              \"logDesc\",\n                                              logDesc,\n                                              isWorkoutDesc\n                                            );\n                                            axios\n                                              .post(\n                                                `api/logs/add/${\n                                                  isCurrID[e.target.id]\n                                                }`,\n                                                {\n                                                  username: user.email,\n                                                  title: logTitle,\n                                                  name: exerciseName,\n                                                  description: logDesc,\n                                                  set:\n                                                    isWorkoutDesc[e.target.id]\n                                                      .set,\n                                                  reps:\n                                                    isWorkoutDesc[e.target.id]\n                                                      .reps,\n                                                  weight:\n                                                    isWorkoutDesc[e.target.id]\n                                                      .weight,\n                                                  date: date,\n                                                }\n                                              )\n                                              .then((response) => {\n                                                console.log(response);\n                                              })\n                                              .catch((err) => {\n                                                console.log(err);\n                                              });\n                                            window.location.reload();\n                                          }}\n                                        >\n                                          Submit\n                                        </Button>\n                                        <Button\n                                          className={\"ml-2 mt-5\"}\n                                          variant={\"outline-danger\"}\n                                          onClick={(e) => {\n                                            e.preventDefault();\n                                            SetNewExercise((isNewExercise) => [\n                                              ...isNewExercise.slice(0, index),\n                                              ...isNewExercise.slice(index + 1),\n                                            ]);\n                                            SetShown((isShown) => [\n                                              ...isShown.slice(0, index),\n                                              false,\n                                              ...isShown.slice(index + 1),\n                                            ]);\n                                          }}\n                                        >\n                                          Cancel\n                                        </Button>\n                                      </div>\n                                    </div>\n                                  </>\n                                </>\n                              )}\n                              <div\n                                className={\"d-flex d-inline-flex\"}\n                                style={{ textAlign: \"center\" }}\n                              >\n                                <button\n                                  id={index}\n                                  style={{\n                                    borderRadius: \"10vw\",\n                                    background: \"none\",\n                                    borderStyle: \"hidden\",\n                                  }}\n                                  onClick={(e) => {\n                                    e.preventDefault();\n\n                                    SetShown((isShown) => [\n                                      ...isShown.slice(0, index),\n                                      true,\n                                      ...isShown.slice(index + 1),\n                                    ]);\n                                  }}\n                                >\n                                  <FcPlus size={\"2em\"} />\n                                </button>\n                                <br />\n                                <span\n                                  className=\"p-2 font-weight-bold\"\n                                  style={{ color: \"black\" }}\n                                >\n                                  Add New Exercise\n                                </span>\n                              </div>\n                            </Card.Body>\n                          </Accordion.Collapse>\n                        );\n                      }\n                    })}\n                  </>\n                }\n              </Card>\n\n              <Card>\n                {Object.entries(el).map((log) => {\n                  if (log[1].key === \"date\") {\n                    return log[1].val;\n                  }\n                })}\n              </Card>\n            </Accordion>\n          );\n        })}\n      </div>\n      {isNewLog}\n      <button\n        style={{\n          borderRadius: \"10vw\",\n          background: \"none\",\n          borderStyle: \"hidden\",\n        }}\n        onClick={(e) => {\n          e.preventDefault();\n          SetNewLog(\n            <>\n              <Accordion className={\"p-2\"} defaultActiveKey=\"0\">\n                <Card>\n                  <Card.Header>\n                    Title: <input id={\"new-log-title\"} />\n                  </Card.Header>\n                  <Accordion.Collapse eventKey=\"0\">\n                    <Card.Body>\n                      Description:{\" \"}\n                      <textarea\n                        cols={25}\n                        rows={10}\n                        placeholder={\n                          \"Describe any additional notes regarding this log\"\n                        }\n                        id={\"new-log-desc\"}\n                      />\n                    </Card.Body>\n                  </Accordion.Collapse>\n                </Card>\n              </Accordion>\n              <div\n                className={\"d-flex d-inline-flex\"}\n                style={{ float: \"right\" }}\n              >\n                <Button\n                  className={\"p-2\"}\n                  variant={\"outline-primary\"}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    if (\n                      document.querySelector(\"#new-log-title\").value === \"\" ||\n                      document.querySelector(\"#new-log-desc\").value === \"\"\n                    ) {\n                      alert(\"All must be filled!\");\n                    }\n\n                    console.log(\n                      \"LOG TITLE\",\n                      document.querySelector(\"#new-log-title\").value\n                    );\n                    console.log(\n                      \"LOG DESC\",\n                      document.querySelector(\"#new-log-desc\").value\n                    );\n                    let date = new Date();\n                    //add new log\n                    axios\n                      .post(`api/logs/create`, {\n                        username: user.email,\n                        title: document.querySelector(\"#new-log-title\").value,\n                        description: document.querySelector(\"#new-log-desc\")\n                          .value,\n                        date: date,\n                      })\n                      .then((response) => {\n                        window.location.reload();\n                      })\n                      .catch((err) => {\n                        console.log(err);\n                      });\n                  }}\n                >\n                  Submit\n                </Button>\n                <Button\n                  className={\"ml-2 mr-2\"}\n                  variant={\"outline-danger\"}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    SetNewLog(null);\n                  }}\n                >\n                  Cancel\n                </Button>\n              </div>\n            </>\n          );\n        }}\n      >\n        <FcPlus size={\"2em\"} />\n      </button>\n      <br />\n\n      <span className=\"ml-2 p-2 font-weight-bold\" style={{ color: \"white\" }}>\n        Add Log\n      </span>\n    </>\n  );\n};\nexport default ViewLogList;\n"]},"metadata":{},"sourceType":"module"}