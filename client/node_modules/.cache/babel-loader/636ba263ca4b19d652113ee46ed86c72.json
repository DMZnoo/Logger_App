{"ast":null,"code":"import _regeneratorRuntime from\"/Users/daniel/WebstormProjects/Exercise_App/Exercise_Logger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/daniel/WebstormProjects/Exercise_App/Exercise_Logger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/daniel/WebstormProjects/Exercise_App/Exercise_Logger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Container,Row,Col}from\"react-bootstrap\";import JSONPretty from\"react-json-pretty\";import{useAuth0}from\"@auth0/auth0-react\";var Profile=function Profile(){var _useAuth=useAuth0(),user=_useAuth.user,isAuthenticated=_useAuth.isAuthenticated,getAccessTokenSilently=_useAuth.getAccessTokenSilently;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userMetadata=_useState2[0],setUserMetadata=_useState2[1];useEffect(function(){var getUserMetadata=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var domain,audience,accessToken,userDetailsByIdUrl,metadataResponse,_yield$metadataRespon,user_metadata;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:domain=process.env.REACT_APP_AUTH0_DOMAIN;audience=process.env.REACT_APP_AUTH0_AUDIENCE;_context.prev=2;_context.next=5;return getAccessTokenSilently({audience:\"https://\".concat(domain,\"/api/v2/\"),scope:\"read:current_user\"});case 5:accessToken=_context.sent;userDetailsByIdUrl=\"https://\".concat(domain,\"/api/v2/users/\").concat(user.sub);_context.next=9;return fetch(userDetailsByIdUrl,{headers:{Authorization:\"Bearer \".concat(accessToken)}});case 9:metadataResponse=_context.sent;_context.next=12;return metadataResponse.json();case 12:_yield$metadataRespon=_context.sent;user_metadata=_yield$metadataRespon.user_metadata;setUserMetadata(user_metadata);_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](2);console.log(_context.t0.message);case 20:case\"end\":return _context.stop();}}},_callee,null,[[2,17]]);}));return function getUserMetadata(){return _ref.apply(this,arguments);};}();getUserMetadata();},[]);return/*#__PURE__*/React.createElement(Container,{className:\"mb-5\",style:{color:\"white\"}},/*#__PURE__*/React.createElement(Row,{className:\"align-items-center profile-header mb-5 text-center text-md-left\"},/*#__PURE__*/React.createElement(Col,{md:2},/*#__PURE__*/React.createElement(\"img\",{src:user.picture,alt:\"Profile\",className:\"rounded-circle img-fluid profile-picture mb-3 mb-md-0\"})),/*#__PURE__*/React.createElement(Col,{md:true},/*#__PURE__*/React.createElement(\"h2\",null,user.name),/*#__PURE__*/React.createElement(\"p\",{className:\"lead text-muted\"},user.email))),/*#__PURE__*/React.createElement(Row,{className:\"align-items-center profile-header mb-5 text-center text-md-left\"},/*#__PURE__*/React.createElement(Col,{md:true},/*#__PURE__*/React.createElement(\"h3\",null,\"User Metadata\"),/*#__PURE__*/React.createElement(\"pre\",null,JSON.stringify(user.sub,null,2)))));};export default Profile;","map":{"version":3,"sources":["/Users/daniel/WebstormProjects/Exercise_App/Exercise_Logger/client/src/components/user/Profile.js"],"names":["React","useState","useEffect","Container","Row","Col","JSONPretty","useAuth0","Profile","user","isAuthenticated","getAccessTokenSilently","userMetadata","setUserMetadata","getUserMetadata","domain","process","env","REACT_APP_AUTH0_DOMAIN","audience","REACT_APP_AUTH0_AUDIENCE","scope","accessToken","userDetailsByIdUrl","sub","fetch","headers","Authorization","metadataResponse","json","user_metadata","console","log","message","color","picture","name","email","JSON","stringify"],"mappings":"wiBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,SAAT,CAAoBC,GAApB,CAAyBC,GAAzB,KAAoC,iBAApC,CACA,MAAOC,CAAAA,UAAP,KAAuB,mBAAvB,CACA,OAASC,QAAT,KAAyB,oBAAzB,CAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,cACsCD,QAAQ,EAD9C,CACZE,IADY,UACZA,IADY,CACNC,eADM,UACNA,eADM,CACWC,sBADX,UACWA,sBADX,eAEoBV,QAAQ,CAAC,IAAD,CAF5B,wCAEbW,YAFa,eAECC,eAFD,eAGpBX,SAAS,CAAC,UAAM,CACd,GAAMY,CAAAA,eAAe,0FAAG,2OAChBC,MADgB,CACPC,OAAO,CAACC,GAAR,CAAYC,sBADL,CAEhBC,QAFgB,CAELH,OAAO,CAACC,GAAR,CAAYG,wBAFP,uCAKMT,CAAAA,sBAAsB,CAAC,CAC/CQ,QAAQ,mBAAaJ,MAAb,YADuC,CAE/CM,KAAK,CAAE,mBAFwC,CAAD,CAL5B,QAKdC,WALc,eAUdC,kBAVc,mBAUkBR,MAVlB,0BAUyCN,IAAI,CAACe,GAV9C,wBAYWC,CAAAA,KAAK,CAACF,kBAAD,CAAqB,CACvDG,OAAO,CAAE,CACPC,aAAa,kBAAYL,WAAZ,CADN,CAD8C,CAArB,CAZhB,QAYdM,gBAZc,sCAkBYA,CAAAA,gBAAgB,CAACC,IAAjB,EAlBZ,6CAkBZC,aAlBY,uBAkBZA,aAlBY,CAoBpBjB,eAAe,CAACiB,aAAD,CAAf,CApBoB,iFAsBpBC,OAAO,CAACC,GAAR,CAAY,YAAEC,OAAd,EAtBoB,qEAAH,kBAAfnB,CAAAA,eAAe,0CAArB,CA0BAA,eAAe,GAChB,CA5BQ,CA4BN,EA5BM,CAAT,CA6BA,mBACE,oBAAC,SAAD,EAAW,SAAS,CAAC,MAArB,CAA4B,KAAK,CAAE,CAAEoB,KAAK,CAAE,OAAT,CAAnC,eACE,oBAAC,GAAD,EAAK,SAAS,CAAC,iEAAf,eACE,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eACE,2BACE,GAAG,CAAEzB,IAAI,CAAC0B,OADZ,CAEE,GAAG,CAAC,SAFN,CAGE,SAAS,CAAC,uDAHZ,EADF,CADF,cAQE,oBAAC,GAAD,EAAK,EAAE,KAAP,eACE,8BAAK1B,IAAI,CAAC2B,IAAV,CADF,cAEE,yBAAG,SAAS,CAAC,iBAAb,EAAgC3B,IAAI,CAAC4B,KAArC,CAFF,CARF,CADF,cAcE,oBAAC,GAAD,EAAK,SAAS,CAAC,iEAAf,eACE,oBAAC,GAAD,EAAK,EAAE,KAAP,eACE,8CADF,cAEE,+BAAMC,IAAI,CAACC,SAAL,CAAe9B,IAAI,CAACe,GAApB,CAAyB,IAAzB,CAA+B,CAA/B,CAAN,CAFF,CADF,CAdF,CADF,CAuBD,CAvDD,CAyDA,cAAehB,CAAAA,OAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport JSONPretty from \"react-json-pretty\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\nconst Profile = () => {\n  const { user, isAuthenticated, getAccessTokenSilently } = useAuth0();\n  const [userMetadata, setUserMetadata] = useState(null);\n  useEffect(() => {\n    const getUserMetadata = async () => {\n      const domain = process.env.REACT_APP_AUTH0_DOMAIN;\n      const audience = process.env.REACT_APP_AUTH0_AUDIENCE;\n\n      try {\n        const accessToken = await getAccessTokenSilently({\n          audience: `https://${domain}/api/v2/`,\n          scope: \"read:current_user\",\n        });\n\n        const userDetailsByIdUrl = `https://${domain}/api/v2/users/${user.sub}`;\n\n        const metadataResponse = await fetch(userDetailsByIdUrl, {\n          headers: {\n            Authorization: `Bearer ${accessToken}`,\n          },\n        });\n\n        const { user_metadata } = await metadataResponse.json();\n\n        setUserMetadata(user_metadata);\n      } catch (e) {\n        console.log(e.message);\n      }\n    };\n\n    getUserMetadata();\n  }, []);\n  return (\n    <Container className=\"mb-5\" style={{ color: \"white\" }}>\n      <Row className=\"align-items-center profile-header mb-5 text-center text-md-left\">\n        <Col md={2}>\n          <img\n            src={user.picture}\n            alt=\"Profile\"\n            className=\"rounded-circle img-fluid profile-picture mb-3 mb-md-0\"\n          />\n        </Col>\n        <Col md>\n          <h2>{user.name}</h2>\n          <p className=\"lead text-muted\">{user.email}</p>\n        </Col>\n      </Row>\n      <Row className=\"align-items-center profile-header mb-5 text-center text-md-left\">\n        <Col md>\n          <h3>User Metadata</h3>\n          <pre>{JSON.stringify(user.sub, null, 2)}</pre>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}