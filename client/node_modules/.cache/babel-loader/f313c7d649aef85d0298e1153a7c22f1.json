{"ast":null,"code":"import _toConsumableArray from\"/var/www/Exercise_Logger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/var/www/Exercise_Logger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Button}from\"react-bootstrap\";import axios from\"axios\";import{useAuth0}from\"@auth0/auth0-react\";import{MdDone}from\"react-icons/md\";var SubmitUpdate=function SubmitUpdate(_ref){var index=_ref.index,_ref$workoutIndex=_ref.workoutIndex,workoutIndex=_ref$workoutIndex===void 0?-1:_ref$workoutIndex,isEdit=_ref.isEdit,_ref$isEditList=_ref.isEditList,isEditList=_ref$isEditList===void 0?null:_ref$isEditList,_ref$isValues=_ref.isValues,isValues=_ref$isValues===void 0?null:_ref$isValues,_ref$isKeys=_ref.isKeys,isKeys=_ref$isKeys===void 0?null:_ref$isKeys,isCurrID=_ref.isCurrID,_ref$updateData=_ref.updateData,updateData=_ref$updateData===void 0?null:_ref$updateData,SetEdit=_ref.SetEdit,target=_ref.target;var _useAuth=useAuth0(),user=_useAuth.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isHover=_useState2[0],SetHover=_useState2[1];var handleLog=function handleLog(){var logTitle=document.querySelector(\"#log-title-\".concat(index));var logDesc=document.querySelector(\"#log-desc-\".concat(index));if(target===\"Log\"){logTitle=logTitle.value===null||logTitle.value.length===0?logTitle.getAttribute(\"placeholder\"):logTitle.value;logDesc=logDesc.value===null||logDesc.value.length===0?logDesc.getAttribute(\"placeholder\"):logDesc.value;}else{logTitle=logTitle.innerText;logDesc=logDesc.innerText;}//edit the log\naxios.post(\"api/logs/update/\".concat(isCurrID[index]),{username:user.email,title:logTitle,description:logDesc}).then(function(response){console.log(\"Log Updated\");console.log(\"Updated Log data\",response);var promises=[];Object.values(response.data.exercises).forEach(function(ex,idx){console.log(\"ExerciseID:\",ex);promises.push(handleWorkout(ex,idx));});Promise.all(promises).then(function(){SetEdit(function(isEdit){return[].concat(_toConsumableArray(isEdit.slice(0,index)),[false],_toConsumableArray(isEdit.slice(index+1)));});updateData(response.data,true,false);});}).catch(function(err){console.log(err);});};var handleWorkout=function handleWorkout(exerciseId,index){console.log(\"ExerciseId Handling:\",exerciseId);if(isValues===null&&isKeys===null){var data=Object.assign({},isEditList[index]);isValues=Object.values(data[0]);isKeys=Object.keys(data[0]);console.log(isValues);console.log(isKeys);}axios.post(\"/api/exercises/update/\".concat(exerciseId),{name:isValues[isKeys.indexOf(\"name\")],description:isValues[isKeys.indexOf(\"description\")],set:isValues[isKeys.indexOf(\"set\")],reps:isValues[isKeys.indexOf(\"reps\")],weight:isValues[isKeys.indexOf(\"weight\")]}).then(function(res){console.log(\"Updated Workout data\",res);}).catch(function(err){console.log(err);});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{variant:\"outline-success\",style:{borderRadius:\"10vw\",borderStyle:\"hidden\"},onClick:function onClick(e){e.preventDefault();if(workoutIndex===-1){handleLog();}else{handleWorkout(isValues[isKeys.indexOf(\"_id\")],workoutIndex);SetEdit(function(isEdit){return[].concat(_toConsumableArray(isEdit.slice(0,workoutIndex)),[!isEdit[workoutIndex]],_toConsumableArray(isEdit.slice(workoutIndex+1)));});}}},/*#__PURE__*/React.createElement(MdDone,{size:\"1.5em\",style:{color:\"green\"}}),/*#__PURE__*/React.createElement(\"span\",{className:\"p-2 font-weight-bold\",onMouseEnter:function onMouseEnter(){SetHover(!isHover);},onMouseOut:function onMouseOut(){SetHover(!isHover);},style:{color:isHover?\"white\":\"green\"}},\"Save?\")),/*#__PURE__*/React.createElement(Button,{className:\"p-2\",variant:\"outline-danger\",style:{borderRadius:\"10vw\",borderStyle:\"hidden\"},onClick:function onClick(e){if(workoutIndex!==-1){SetEdit(function(isEdit){return[].concat(_toConsumableArray(isEdit.slice(0,workoutIndex)),[!isEdit[workoutIndex]],_toConsumableArray(isEdit.slice(workoutIndex+1)));});}else{SetEdit(function(isEdit){return[].concat(_toConsumableArray(isEdit.slice(0,index)),[!isEdit[index]],_toConsumableArray(isEdit.slice(index+1)));});}}},\"Cancel\"),/*#__PURE__*/React.createElement(\"hr\",null));};export default SubmitUpdate;","map":{"version":3,"sources":["/var/www/Exercise_Logger/client/src/components/partials/SubmitUpdate.js"],"names":["React","useState","Button","axios","useAuth0","MdDone","SubmitUpdate","index","workoutIndex","isEdit","isEditList","isValues","isKeys","isCurrID","updateData","SetEdit","target","user","isHover","SetHover","handleLog","logTitle","document","querySelector","logDesc","value","length","getAttribute","innerText","post","username","email","title","description","then","response","console","log","promises","Object","values","data","exercises","forEach","ex","idx","push","handleWorkout","Promise","all","slice","catch","err","exerciseId","assign","keys","name","indexOf","set","reps","weight","res","borderRadius","borderStyle","e","preventDefault","color"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { MdDone } from \"react-icons/md\";\nconst SubmitUpdate = ({\n  index,\n  workoutIndex = -1,\n  isEdit,\n  isEditList = null,\n  isValues = null,\n  isKeys = null,\n  isCurrID,\n  updateData = null,\n  SetEdit,\n  target,\n}) => {\n  const { user } = useAuth0();\n  const [isHover, SetHover] = useState(false);\n  const handleLog = () => {\n    let logTitle = document.querySelector(`#log-title-${index}`);\n    let logDesc = document.querySelector(`#log-desc-${index}`);\n    if (target === \"Log\") {\n      logTitle =\n        logTitle.value === null || logTitle.value.length === 0\n          ? logTitle.getAttribute(\"placeholder\")\n          : logTitle.value;\n      logDesc =\n        logDesc.value === null || logDesc.value.length === 0\n          ? logDesc.getAttribute(\"placeholder\")\n          : logDesc.value;\n    } else {\n      logTitle = logTitle.innerText;\n      logDesc = logDesc.innerText;\n    }\n\n    //edit the log\n    axios\n      .post(`api/logs/update/${isCurrID[index]}`, {\n        username: user.email,\n        title: logTitle,\n        description: logDesc,\n      })\n      .then((response) => {\n        console.log(\"Log Updated\");\n        console.log(\"Updated Log data\", response);\n        let promises = [];\n        Object.values(response.data.exercises).forEach((ex, idx) => {\n          console.log(\"ExerciseID:\", ex);\n          promises.push(handleWorkout(ex, idx));\n        });\n        Promise.all(promises).then(() => {\n          SetEdit((isEdit) => [\n            ...isEdit.slice(0, index),\n            false,\n            ...isEdit.slice(index + 1),\n          ]);\n          updateData(response.data, true, false);\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const handleWorkout = (exerciseId, index) => {\n    console.log(\"ExerciseId Handling:\", exerciseId);\n    if (isValues === null && isKeys === null) {\n      const data = Object.assign({}, isEditList[index]);\n      isValues = Object.values(data[0]);\n      isKeys = Object.keys(data[0]);\n      console.log(isValues);\n      console.log(isKeys);\n    }\n    axios\n      .post(`/api/exercises/update/${exerciseId}`, {\n        name: isValues[isKeys.indexOf(\"name\")],\n        description: isValues[isKeys.indexOf(\"description\")],\n        set: isValues[isKeys.indexOf(\"set\")],\n        reps: isValues[isKeys.indexOf(\"reps\")],\n        weight: isValues[isKeys.indexOf(\"weight\")],\n      })\n      .then((res) => {\n        console.log(\"Updated Workout data\", res);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n  return (\n    <>\n      <Button\n        variant={\"outline-success\"}\n        style={{\n          borderRadius: \"10vw\",\n          borderStyle: \"hidden\",\n        }}\n        onClick={(e) => {\n          e.preventDefault();\n          if (workoutIndex === -1) {\n            handleLog();\n          } else {\n            handleWorkout(isValues[isKeys.indexOf(\"_id\")], workoutIndex);\n            SetEdit((isEdit) => [\n              ...isEdit.slice(0, workoutIndex),\n              !isEdit[workoutIndex],\n              ...isEdit.slice(workoutIndex + 1),\n            ]);\n          }\n        }}\n      >\n        <MdDone size={\"1.5em\"} style={{ color: \"green\" }} />\n        <span\n          className=\"p-2 font-weight-bold\"\n          onMouseEnter={() => {\n            SetHover(!isHover);\n          }}\n          onMouseOut={() => {\n            SetHover(!isHover);\n          }}\n          style={{ color: isHover ? \"white\" : \"green\" }}\n        >\n          Save?\n        </span>\n      </Button>\n      <Button\n        className={\"p-2\"}\n        variant={\"outline-danger\"}\n        style={{\n          borderRadius: \"10vw\",\n          borderStyle: \"hidden\",\n        }}\n        onClick={(e) => {\n          if (workoutIndex !== -1) {\n            SetEdit((isEdit) => [\n              ...isEdit.slice(0, workoutIndex),\n              !isEdit[workoutIndex],\n              ...isEdit.slice(workoutIndex + 1),\n            ]);\n          } else {\n            SetEdit((isEdit) => [\n              ...isEdit.slice(0, index),\n              !isEdit[index],\n              ...isEdit.slice(index + 1),\n            ]);\n          }\n        }}\n      >\n        Cancel\n      </Button>\n      <hr />\n    </>\n  );\n};\nexport default SubmitUpdate;\n"]},"metadata":{},"sourceType":"module"}