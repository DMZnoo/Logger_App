{"ast":null,"code":"import _toConsumableArray from\"/var/www/Exercise_Logger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/var/www/Exercise_Logger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Button,Accordion,Card,AccordionToggle,Table}from\"react-bootstrap\";import{FcPlus}from\"react-icons/fc\";import{useAuth0}from\"@auth0/auth0-react\";import EditableTable from\"../partials/EditableTable\";var ViewLogList=function ViewLogList(_ref){var auth=_ref.auth;var _useAuth=useAuth0(),user=_useAuth.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),isDisplayList=_useState2[0],SetDisplayList=_useState2[1];var _useState3=useState({title:null,content:null}),_useState4=_slicedToArray(_useState3,2),isNewExercise=_useState4[0],SetNewExercise=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),isCurrID=_useState6[0],SetCurrID=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),isNewLog=_useState8[0],SetNewLog=_useState8[1];var _useState9=useState({set:[1],reps:[1],weight:[5]}),_useState10=_slicedToArray(_useState9,2),isDesc=_useState10[0],SetDesc=_useState10[1];useEffect(function(){if(auth){axios.get(\"api/logs\").then(function(res){res.data.forEach(function(el,idx){if(el.username===user.email){var _loop=function _loop(attr){if(el.hasOwnProperty(attr)){if(attr===\"_id\")SetCurrID(function(isCurrID){return[].concat(_toConsumableArray(isCurrID),[el[attr]]);});SetDisplayList(function(isDisplayList){return[].concat(_toConsumableArray(isDisplayList),[{key:attr,val:el[attr]}]);});}};for(var attr in el){_loop(attr);}SetDisplayList(function(isDisplayList){return[isDisplayList];});}});});}},[]);var SetExerciseDescription=function SetExerciseDescription(state){SetDesc({set:state.set,reps:state.reps,weight:state.weight});};var handleDelete=function handleDelete(e,idx){e.preventDefault();if(isDesc.set.length>1){var newIndexArr=[];isDesc.set.forEach(function(el,index){if(index>idx){newIndexArr.push(el-1);}});SetDesc({set:[].concat(_toConsumableArray(isDesc.set.slice(0,idx)),newIndexArr),reps:[].concat(_toConsumableArray(isDesc.reps.slice(0,idx)),_toConsumableArray(isDesc.reps.slice(idx+1))),weight:[].concat(_toConsumableArray(isDesc.weight.slice(0,idx)),_toConsumableArray(isDesc.weight.slice(idx+1)))});}else{SetDesc({set:[].concat(_toConsumableArray(isDesc.set.slice(0,idx)),_toConsumableArray(isDesc.set.slice(idx+1))),reps:[].concat(_toConsumableArray(isDesc.reps.slice(0,idx)),_toConsumableArray(isDesc.reps.slice(idx+1))),weight:[].concat(_toConsumableArray(isDesc.weight.slice(0,idx)),_toConsumableArray(isDesc.weight.slice(idx+1)))});}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,isDisplayList.map(function(el,li){return/*#__PURE__*/React.createElement(Accordion,{key:\"log-disp\"+li,className:\"p-2\",defaultActiveKey:\"0\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(React.Fragment,null,Object.entries(el).map(function(log){if(log[1].key===\"title\"){return/*#__PURE__*/React.createElement(Accordion.Toggle,{as:Card.Header,eventKey:\"0\",id:\"log-title-\"+\"\".concat(li)},log[1].val);}else if(log[1].key===\"description\"){return/*#__PURE__*/React.createElement(Accordion.Collapse,{eventKey:\"0\"},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(\"div\",{className:\"p-2\"},/*#__PURE__*/React.createElement(\"p\",{id:\"log-desc-\"+\"\".concat(li)},log[1].key===\"description\"&&log[1].val)),/*#__PURE__*/React.createElement(React.Fragment,null,Object.entries(el).map(function(log){if(log[1].key===\"exercises\"){return/*#__PURE__*/React.createElement(React.Fragment,null,log[1].val.map(function(ex){return/*#__PURE__*/React.createElement(\"div\",{className:\"container\",style:{overflowX:\"auto\"}},/*#__PURE__*/React.createElement(Table,{striped:true,borderless:true,variant:\"dark\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",{id:\"table-thead-tr\"},/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null,\"Set\"),/*#__PURE__*/React.createElement(\"th\",null,\"Reps\"),/*#__PURE__*/React.createElement(\"th\",null,\"Weight\"))),/*#__PURE__*/React.createElement(\"tbody\",null,ex.set.map(function(set,idx){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null,set),/*#__PURE__*/React.createElement(\"td\",null,ex.reps[idx]),/*#__PURE__*/React.createElement(\"td\",null,ex.weight[idx]));}))));}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 d-flex d-inline-flex\"},isNewExercise.title),/*#__PURE__*/React.createElement(React.Fragment,null,isNewExercise.content),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex d-inline-flex\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"button\",{style:{borderRadius:\"10vw\",background:\"none\",borderStyle:\"hidden\"},onClick:function onClick(e){e.preventDefault();SetNewExercise({title:/*#__PURE__*/React.createElement(\"input\",{size:5,id:\"new-workout-name\"}),content:/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(EditableTable,{thead:[\"Set\",\"Reps\",\"Weight\"],SetData:SetExerciseDescription,style:{color:\"black\"}}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex d-inline-flex\",style:{float:\"right\"}},/*#__PURE__*/React.createElement(Button,{id:li,className:\"p-2\",variant:\"outline-primary\",onClick:function onClick(e,li){e.preventDefault();if(document.querySelector(\"#new-workout-name\").value===null){alert(\"Please provide the name\");}console.log(\"ID: \",e.target.id);console.log(\"LOG TITLE: \",document.getElementById(\"log-title-\"+\"\".concat(e.target.id)).innerText,document.getElementById(\"log-desc-\"+\"\".concat(e.target.id)).innerText);console.log(\"WORKOUT NAME: \",document.querySelector(\"#new-workout-name\").value);var date=new Date();axios.post(\"api/logs/add/\".concat(isCurrID[e.target.id]),{username:user.email,title:document.getElementById(\"log-title-\"+\"\".concat(e.target.id)).innerText,name:document.querySelector(\"#new-workout-name\").value,description:document.getElementById(\"log-desc-\"+\"\".concat(e.target.id)).innerText,set:isDesc.set,reps:isDesc.reps,weight:isDesc.weight,date:date}).then(function(response){console.log(response);window.location.reload();}).catch(function(err){console.log(err);});}},\"Submit\"),/*#__PURE__*/React.createElement(Button,{className:\"ml-2\",variant:\"outline-danger\",onClick:function onClick(e){e.preventDefault();SetNewExercise({title:null,content:null});}},\"Cancel\")))});}},/*#__PURE__*/React.createElement(FcPlus,{size:\"2em\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{className:\"p-2 font-weight-bold\",style:{color:\"black\"}},\"Add New Exercise\"))));}}))),/*#__PURE__*/React.createElement(Card,null,Object.entries(el).map(function(log){if(log[1].key===\"date\"){return log[1].val;}})));})),isNewLog,/*#__PURE__*/React.createElement(\"button\",{style:{borderRadius:\"10vw\",background:\"none\",borderStyle:\"hidden\"},onClick:function onClick(e){e.preventDefault();SetNewLog(/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Accordion,{className:\"p-2\",defaultActiveKey:\"0\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,\"Title: \",/*#__PURE__*/React.createElement(\"input\",{id:\"new-log-title\"})),/*#__PURE__*/React.createElement(Accordion.Collapse,{eventKey:\"0\"},/*#__PURE__*/React.createElement(Card.Body,null,\"Description:\",\" \",/*#__PURE__*/React.createElement(\"textarea\",{cols:25,rows:10,placeholder:\"Describe any additional notes regarding this log\",id:\"new-log-desc\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex d-inline-flex\",style:{float:\"right\"}},/*#__PURE__*/React.createElement(Button,{className:\"p-2\",variant:\"outline-primary\",onClick:function onClick(e){e.preventDefault();if(document.querySelector(\"#new-log-title\").value===\"\"||document.querySelector(\"#new-log-desc\").value===\"\"){alert(\"All must be filled!\");}console.log(\"LOG TITLE\",document.querySelector(\"#new-log-title\").value);console.log(\"LOG DESC\",document.querySelector(\"#new-log-desc\").value);var date=new Date();//add new log\naxios.post(\"api/logs/create\",{username:user.email,title:document.querySelector(\"#new-log-title\").value,description:document.querySelector(\"#new-log-desc\").value,date:date}).then(function(response){console.log(response);window.location.reload();}).catch(function(err){console.log(err);});}},\"Submit\"),/*#__PURE__*/React.createElement(Button,{className:\"ml-2 mr-2\",variant:\"outline-danger\",onClick:function onClick(e){e.preventDefault();SetNewLog(null);}},\"Cancel\"))));}},/*#__PURE__*/React.createElement(FcPlus,{size:\"2em\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{className:\"ml-2 p-2 font-weight-bold\",style:{color:\"white\"}},\"Add Log\"));};export default ViewLogList;","map":{"version":3,"sources":["/var/www/Exercise_Logger/client/src/components/log/ViewLogList.js"],"names":["React","useState","useEffect","axios","Button","Accordion","Card","AccordionToggle","Table","FcPlus","useAuth0","EditableTable","ViewLogList","auth","user","isDisplayList","SetDisplayList","title","content","isNewExercise","SetNewExercise","isCurrID","SetCurrID","isNewLog","SetNewLog","set","reps","weight","isDesc","SetDesc","get","then","res","data","forEach","el","idx","username","email","attr","hasOwnProperty","key","val","SetExerciseDescription","state","handleDelete","e","preventDefault","length","newIndexArr","index","push","slice","map","li","Object","entries","log","Header","ex","overflowX","textAlign","borderRadius","background","borderStyle","color","float","document","querySelector","value","alert","console","target","id","getElementById","innerText","date","Date","post","name","description","response","window","location","reload","catch","err"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  Button,\n  Accordion,\n  Card,\n  AccordionToggle,\n  Table,\n} from \"react-bootstrap\";\nimport { FcPlus } from \"react-icons/fc\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport EditableTable from \"../partials/EditableTable\";\n\nconst ViewLogList = ({ auth }) => {\n  const { user } = useAuth0();\n  const [isDisplayList, SetDisplayList] = useState([]);\n  const [isNewExercise, SetNewExercise] = useState({\n    title: null,\n    content: null,\n  });\n  const [isCurrID, SetCurrID] = useState([]);\n  const [isNewLog, SetNewLog] = useState(null);\n  const [isDesc, SetDesc] = useState({\n    set: [1],\n    reps: [1],\n    weight: [5],\n  });\n\n  useEffect(() => {\n    if (auth) {\n      axios.get(`api/logs`).then((res) => {\n        res.data.forEach((el, idx) => {\n          if (el.username === user.email) {\n            for (let attr in el) {\n              if (el.hasOwnProperty(attr)) {\n                if (attr === \"_id\")\n                  SetCurrID((isCurrID) => [...isCurrID, el[attr]]);\n                SetDisplayList((isDisplayList) => [\n                  ...isDisplayList,\n                  { key: attr, val: el[attr] },\n                ]);\n              }\n            }\n            SetDisplayList((isDisplayList) => [isDisplayList]);\n          }\n        });\n      });\n    }\n  }, []);\n\n  const SetExerciseDescription = (state) => {\n    SetDesc({\n      set: state.set,\n      reps: state.reps,\n      weight: state.weight,\n    });\n  };\n  const handleDelete = (e, idx) => {\n    e.preventDefault();\n    if (isDesc.set.length > 1) {\n      let newIndexArr = [];\n      isDesc.set.forEach((el, index) => {\n        if (index > idx) {\n          newIndexArr.push(el - 1);\n        }\n      });\n      SetDesc({\n        set: [...isDesc.set.slice(0, idx), ...newIndexArr],\n        reps: [...isDesc.reps.slice(0, idx), ...isDesc.reps.slice(idx + 1)],\n        weight: [\n          ...isDesc.weight.slice(0, idx),\n          ...isDesc.weight.slice(idx + 1),\n        ],\n      });\n    } else {\n      SetDesc({\n        set: [...isDesc.set.slice(0, idx), ...isDesc.set.slice(idx + 1)],\n        reps: [...isDesc.reps.slice(0, idx), ...isDesc.reps.slice(idx + 1)],\n        weight: [\n          ...isDesc.weight.slice(0, idx),\n          ...isDesc.weight.slice(idx + 1),\n        ],\n      });\n    }\n  };\n  return (\n    <>\n      <div>\n        {isDisplayList.map((el, li) => {\n          return (\n            <Accordion\n              key={\"log-disp\" + li}\n              className={\"p-2\"}\n              defaultActiveKey=\"0\"\n            >\n              <Card>\n                {\n                  <>\n                    {Object.entries(el).map((log) => {\n                      if (log[1].key === \"title\") {\n                        return (\n                          <Accordion.Toggle\n                            as={Card.Header}\n                            eventKey=\"0\"\n                            id={\"log-title-\" + `${li}`}\n                          >\n                            {log[1].val}\n                          </Accordion.Toggle>\n                        );\n                      } else if (log[1].key === \"description\") {\n                        return (\n                          <Accordion.Collapse eventKey=\"0\">\n                            <Card.Body>\n                              <div className={\"p-2\"}>\n                                <p id={\"log-desc-\" + `${li}`}>\n                                  {log[1].key === \"description\" && log[1].val}\n                                </p>\n                              </div>\n                              <>\n                                {Object.entries(el).map((log) => {\n                                  if (log[1].key === \"exercises\") {\n                                    return (\n                                      <>\n                                        {log[1].val.map((ex) => {\n                                          return (\n                                            <div\n                                              className={\"container\"}\n                                              style={{ overflowX: \"auto\" }}\n                                            >\n                                              <Table\n                                                striped\n                                                borderless\n                                                variant={\"dark\"}\n                                              >\n                                                <thead className=\"thead-dark\">\n                                                  <tr id=\"table-thead-tr\">\n                                                    <th />\n                                                    <th>Set</th>\n                                                    <th>Reps</th>\n                                                    <th>Weight</th>\n                                                  </tr>\n                                                </thead>\n                                                <tbody>\n                                                  {ex.set.map((set, idx) => {\n                                                    return (\n                                                      <tr>\n                                                        <td></td>\n                                                        <td>{set}</td>\n                                                        <td>{ex.reps[idx]}</td>\n                                                        <td>\n                                                          {ex.weight[idx]}\n                                                        </td>\n                                                      </tr>\n                                                    );\n                                                  })}\n                                                </tbody>\n                                              </Table>\n                                            </div>\n                                          );\n                                        })}\n                                      </>\n                                    );\n                                  }\n                                })}\n                              </>\n                              <div className={\"p-2 d-flex d-inline-flex\"}>\n                                {isNewExercise.title}\n                              </div>\n                              <>{isNewExercise.content}</>\n                              <div\n                                className={\"d-flex d-inline-flex\"}\n                                style={{ textAlign: \"center\" }}\n                              >\n                                <button\n                                  style={{\n                                    borderRadius: \"10vw\",\n                                    background: \"none\",\n                                    borderStyle: \"hidden\",\n                                  }}\n                                  onClick={(e) => {\n                                    e.preventDefault();\n                                    SetNewExercise({\n                                      title: (\n                                        <input\n                                          size={5}\n                                          id={\"new-workout-name\"}\n                                        />\n                                      ),\n                                      content: (\n                                        <div>\n                                          <EditableTable\n                                            thead={[\"Set\", \"Reps\", \"Weight\"]}\n                                            SetData={SetExerciseDescription}\n                                            style={{ color: \"black\" }}\n                                          />\n                                          <div\n                                            className={\"d-flex d-inline-flex\"}\n                                            style={{ float: \"right\" }}\n                                          >\n                                            <Button\n                                              id={li}\n                                              className={\"p-2\"}\n                                              variant={\"outline-primary\"}\n                                              onClick={(e, li) => {\n                                                e.preventDefault();\n                                                if (\n                                                  document.querySelector(\n                                                    \"#new-workout-name\"\n                                                  ).value === null\n                                                ) {\n                                                  alert(\n                                                    \"Please provide the name\"\n                                                  );\n                                                }\n                                                console.log(\n                                                  \"ID: \",\n                                                  e.target.id\n                                                );\n                                                console.log(\n                                                  \"LOG TITLE: \",\n                                                  document.getElementById(\n                                                    \"log-title-\" +\n                                                      `${e.target.id}`\n                                                  ).innerText,\n                                                  document.getElementById(\n                                                    \"log-desc-\" +\n                                                      `${e.target.id}`\n                                                  ).innerText\n                                                );\n                                                console.log(\n                                                  \"WORKOUT NAME: \",\n                                                  document.querySelector(\n                                                    \"#new-workout-name\"\n                                                  ).value\n                                                );\n                                                let date = new Date();\n                                                axios\n                                                  .post(\n                                                    `api/logs/add/${\n                                                      isCurrID[e.target.id]\n                                                    }`,\n                                                    {\n                                                      username: user.email,\n                                                      title: document.getElementById(\n                                                        \"log-title-\" +\n                                                          `${e.target.id}`\n                                                      ).innerText,\n                                                      name: document.querySelector(\n                                                        \"#new-workout-name\"\n                                                      ).value,\n                                                      description: document.getElementById(\n                                                        \"log-desc-\" +\n                                                          `${e.target.id}`\n                                                      ).innerText,\n                                                      set: isDesc.set,\n                                                      reps: isDesc.reps,\n                                                      weight: isDesc.weight,\n                                                      date: date,\n                                                    }\n                                                  )\n                                                  .then((response) => {\n                                                    console.log(response);\n                                                    window.location.reload();\n                                                  })\n                                                  .catch((err) => {\n                                                    console.log(err);\n                                                  });\n                                              }}\n                                            >\n                                              Submit\n                                            </Button>\n                                            <Button\n                                              className={\"ml-2\"}\n                                              variant={\"outline-danger\"}\n                                              onClick={(e) => {\n                                                e.preventDefault();\n                                                SetNewExercise({\n                                                  title: null,\n                                                  content: null,\n                                                });\n                                              }}\n                                            >\n                                              Cancel\n                                            </Button>\n                                          </div>\n                                        </div>\n                                      ),\n                                    });\n                                  }}\n                                >\n                                  <FcPlus size={\"2em\"} />\n                                </button>\n                                <br />\n\n                                <span\n                                  className=\"p-2 font-weight-bold\"\n                                  style={{ color: \"black\" }}\n                                >\n                                  Add New Exercise\n                                </span>\n                              </div>\n                            </Card.Body>\n                          </Accordion.Collapse>\n                        );\n                      }\n                    })}\n                  </>\n                }\n              </Card>\n\n              <Card>\n                {Object.entries(el).map((log) => {\n                  if (log[1].key === \"date\") {\n                    return log[1].val;\n                  }\n                })}\n              </Card>\n            </Accordion>\n          );\n        })}\n      </div>\n      {isNewLog}\n      <button\n        style={{\n          borderRadius: \"10vw\",\n          background: \"none\",\n          borderStyle: \"hidden\",\n        }}\n        onClick={(e) => {\n          e.preventDefault();\n          SetNewLog(\n            <>\n              <Accordion className={\"p-2\"} defaultActiveKey=\"0\">\n                <Card>\n                  <Card.Header>\n                    Title: <input id={\"new-log-title\"} />\n                  </Card.Header>\n                  <Accordion.Collapse eventKey=\"0\">\n                    <Card.Body>\n                      Description:{\" \"}\n                      <textarea\n                        cols={25}\n                        rows={10}\n                        placeholder={\n                          \"Describe any additional notes regarding this log\"\n                        }\n                        id={\"new-log-desc\"}\n                      />\n                    </Card.Body>\n                  </Accordion.Collapse>\n                </Card>\n              </Accordion>\n              <div\n                className={\"d-flex d-inline-flex\"}\n                style={{ float: \"right\" }}\n              >\n                <Button\n                  className={\"p-2\"}\n                  variant={\"outline-primary\"}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    if (\n                      document.querySelector(\"#new-log-title\").value === \"\" ||\n                      document.querySelector(\"#new-log-desc\").value === \"\"\n                    ) {\n                      alert(\"All must be filled!\");\n                    }\n\n                    console.log(\n                      \"LOG TITLE\",\n                      document.querySelector(\"#new-log-title\").value\n                    );\n                    console.log(\n                      \"LOG DESC\",\n                      document.querySelector(\"#new-log-desc\").value\n                    );\n                    let date = new Date();\n                    //add new log\n                    axios\n                      .post(`api/logs/create`, {\n                        username: user.email,\n                        title: document.querySelector(\"#new-log-title\").value,\n                        description: document.querySelector(\"#new-log-desc\")\n                          .value,\n                        date: date,\n                      })\n                      .then((response) => {\n                        console.log(response);\n                        window.location.reload();\n                      })\n                      .catch((err) => {\n                        console.log(err);\n                      });\n                  }}\n                >\n                  Submit\n                </Button>\n                <Button\n                  className={\"ml-2 mr-2\"}\n                  variant={\"outline-danger\"}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    SetNewLog(null);\n                  }}\n                >\n                  Cancel\n                </Button>\n              </div>\n            </>\n          );\n        }}\n      >\n        <FcPlus size={\"2em\"} />\n      </button>\n      <br />\n\n      <span className=\"ml-2 p-2 font-weight-bold\" style={{ color: \"white\" }}>\n        Add Log\n      </span>\n    </>\n  );\n};\nexport default ViewLogList;\n"]},"metadata":{},"sourceType":"module"}