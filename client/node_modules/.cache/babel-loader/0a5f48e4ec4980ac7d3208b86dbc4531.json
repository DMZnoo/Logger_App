{"ast":null,"code":"import _toConsumableArray from\"/var/www/Exercise_Logger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/var/www/Exercise_Logger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Button,Accordion,Card,Table}from\"react-bootstrap\";import{FcPlus}from\"react-icons/fc\";import{useAuth0}from\"@auth0/auth0-react\";import EditableTable from\"../partials/EditableTable\";var ViewLogList=function ViewLogList(_ref){var auth=_ref.auth;var _useAuth=useAuth0(),user=_useAuth.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),isShown=_useState2[0],SetShown=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),isDisplayList=_useState4[0],SetDisplayList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),isNewExercise=_useState6[0],SetNewExercise=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),isCurrID=_useState8[0],SetCurrID=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),isNewLog=_useState10[0],SetNewLog=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),isDesc=_useState12[0],SetDesc=_useState12[1];useEffect(function(){if(auth){fetchData(null);}},[]);var fetchData=function fetchData(data){if(data===null){axios.get(\"api/logs\").then(function(res){res.data.forEach(function(el,idx){if(el.username===user.email){var currList=[];var _loop=function _loop(attr){if(el.hasOwnProperty(attr)){if(attr===\"_id\")SetCurrID(function(isCurrID){return[].concat(_toConsumableArray(isCurrID),[el[attr]]);});currList.push({key:attr,val:el[attr]});}};for(var attr in el){_loop(attr);}SetShown(function(isShown){return[].concat(_toConsumableArray(isShown),[false]);});SetDesc(function(isDesc){return[].concat(_toConsumableArray(isDesc),[{set:[1],reps:[1],weight:[5]}]);});SetDisplayList(function(isDisplayList){return[].concat(_toConsumableArray(isDisplayList),[currList]);});}});});}else{console.log(data);// axios.get(`api/logs/${data}`).then((res)=>{\n//     res.data.forEach((el,idx)=>{\n//         let currList = [];\n//         for (let attr in el) {\n//             if (el.hasOwnProperty(attr)) {\n//                 if (attr === \"_id\")\n//                     SetCurrID((isCurrID) => [...isCurrID, el[attr]]);\n//                 currList.push({ key: attr, val: el[attr] });\n//             }\n//         }\n//     })\n// })\n}};var SetExerciseDescription=function SetExerciseDescription(state,idx){SetDesc(function(isDesc){return[].concat(_toConsumableArray(isDesc.slice(0,idx)),[{set:state.set,reps:state.reps,weight:state.weight}],_toConsumableArray(isDesc.slice(idx+1)));});};var handleDelete=function handleDelete(e,idx){e.preventDefault();if(isDesc.set.length>1){var newIndexArr=[];isDesc.set.forEach(function(el,index){if(index>idx){newIndexArr.push(el-1);}});SetDesc({set:[].concat(_toConsumableArray(isDesc.set.slice(0,idx)),newIndexArr),reps:[].concat(_toConsumableArray(isDesc.reps.slice(0,idx)),_toConsumableArray(isDesc.reps.slice(idx+1))),weight:[].concat(_toConsumableArray(isDesc.weight.slice(0,idx)),_toConsumableArray(isDesc.weight.slice(idx+1)))});}else{SetDesc({set:[].concat(_toConsumableArray(isDesc.set.slice(0,idx)),_toConsumableArray(isDesc.set.slice(idx+1))),reps:[].concat(_toConsumableArray(isDesc.reps.slice(0,idx)),_toConsumableArray(isDesc.reps.slice(idx+1))),weight:[].concat(_toConsumableArray(isDesc.weight.slice(0,idx)),_toConsumableArray(isDesc.weight.slice(idx+1)))});}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,isDisplayList.map(function(el,index){return/*#__PURE__*/React.createElement(Accordion,{key:\"log-disp\"+index,className:\"p-2\",defaultActiveKey:\"0\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(React.Fragment,null,Object.entries(el).map(function(log){if(log[1].key===\"title\"){return/*#__PURE__*/React.createElement(Accordion.Toggle,{as:Card.Header,eventKey:\"0\",id:\"log-title-\"+\"\".concat(index)},log[1].val);}else if(log[1].key===\"description\"){return/*#__PURE__*/React.createElement(Accordion.Collapse,{eventKey:\"0\"},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(\"div\",{className:\"p-2\"},/*#__PURE__*/React.createElement(\"p\",{id:\"log-desc-\"+\"\".concat(index)},log[1].key===\"description\"&&log[1].val)),/*#__PURE__*/React.createElement(React.Fragment,null,Object.entries(el).map(function(log){if(log[1].key===\"exercises\"){return/*#__PURE__*/React.createElement(React.Fragment,null,log[1].val.map(function(ex){return/*#__PURE__*/React.createElement(\"div\",{className:\"container\",style:{overflowX:\"auto\"}},/*#__PURE__*/React.createElement(\"h3\",null,ex.name),/*#__PURE__*/React.createElement(Table,{striped:true,borderless:true,variant:\"dark\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",{id:\"table-thead-tr\"},/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null,\"Set\"),/*#__PURE__*/React.createElement(\"th\",null,\"Reps\"),/*#__PURE__*/React.createElement(\"th\",null,\"Weight\"))),/*#__PURE__*/React.createElement(\"tbody\",null,ex.set.map(function(set,idx){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null,set),/*#__PURE__*/React.createElement(\"td\",null,ex.reps[idx]),/*#__PURE__*/React.createElement(\"td\",null,ex.weight[idx]));}))));}));}})),isShown[index]&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 d-flex d-inline-flex\"},isNewExercise[index].title),/*#__PURE__*/React.createElement(React.Fragment,null,isNewExercise[index].content)),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex d-inline-flex\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"button\",{id:index,style:{borderRadius:\"10vw\",background:\"none\",borderStyle:\"hidden\"},onClick:function onClick(e){SetShown(function(isShown){return[].concat(_toConsumableArray(isShown.slice(0,index)),[true],_toConsumableArray(isShown.slice(index+1)));});e.preventDefault();SetNewExercise(function(isNewExercise){return[].concat(_toConsumableArray(isNewExercise),[{title:/*#__PURE__*/React.createElement(\"input\",{size:5,id:\"new-workout-name\"}),content:/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(EditableTable,{index:index,thead:[\"Set\",\"Reps\",\"Weight\"],SetData:SetExerciseDescription,style:{color:\"black\"}}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex d-inline-flex\",style:{float:\"right\"}},/*#__PURE__*/React.createElement(Button,{id:index,className:\"p-2\",variant:\"outline-primary\",onClick:function onClick(e,li){e.preventDefault();if(document.querySelector(\"#new-workout-name\").value===null||document.querySelector(\"#new-workout-name\").value===\"\"){alert(\"Please provide the name\");return;}var date=new Date();axios.post(\"api/logs/add/\".concat(isCurrID[e.target.id]),{username:user.email,title:document.getElementById(\"log-title-\"+\"\".concat(e.target.id)).innerText,name:document.querySelector(\"#new-workout-name\").value,description:document.getElementById(\"log-desc-\"+\"\".concat(e.target.id)).innerText,set:isDesc.set,reps:isDesc.reps,weight:isDesc.weight,date:date}).then(function(response){console.log(response);fetchData(response.data);}).catch(function(err){console.log(err);});}},\"Submit\"),/*#__PURE__*/React.createElement(Button,{className:\"ml-2\",variant:\"outline-danger\",onClick:function onClick(e){e.preventDefault();SetNewExercise(function(isNewExercise){return[].concat(_toConsumableArray(isNewExercise.slice(0,index)),[{title:null,content:null}],_toConsumableArray(isNewExercise.slice(index+1)));});}},\"Cancel\")))}]);});}},/*#__PURE__*/React.createElement(FcPlus,{size:\"2em\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{className:\"p-2 font-weight-bold\",style:{color:\"black\"}},\"Add New Exercise\"))));}}))),/*#__PURE__*/React.createElement(Card,null,Object.entries(el).map(function(log){if(log[1].key===\"date\"){return log[1].val;}})));})),isNewLog,/*#__PURE__*/React.createElement(\"button\",{style:{borderRadius:\"10vw\",background:\"none\",borderStyle:\"hidden\"},onClick:function onClick(e){e.preventDefault();SetNewLog(/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Accordion,{className:\"p-2\",defaultActiveKey:\"0\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,\"Title: \",/*#__PURE__*/React.createElement(\"input\",{id:\"new-log-title\"})),/*#__PURE__*/React.createElement(Accordion.Collapse,{eventKey:\"0\"},/*#__PURE__*/React.createElement(Card.Body,null,\"Description:\",\" \",/*#__PURE__*/React.createElement(\"textarea\",{cols:25,rows:10,placeholder:\"Describe any additional notes regarding this log\",id:\"new-log-desc\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex d-inline-flex\",style:{float:\"right\"}},/*#__PURE__*/React.createElement(Button,{className:\"p-2\",variant:\"outline-primary\",onClick:function onClick(e){e.preventDefault();if(document.querySelector(\"#new-log-title\").value===\"\"||document.querySelector(\"#new-log-desc\").value===\"\"){alert(\"All must be filled!\");}console.log(\"LOG TITLE\",document.querySelector(\"#new-log-title\").value);console.log(\"LOG DESC\",document.querySelector(\"#new-log-desc\").value);var date=new Date();//add new log\naxios.post(\"api/logs/create\",{username:user.email,title:document.querySelector(\"#new-log-title\").value,description:document.querySelector(\"#new-log-desc\").value,date:date}).then(function(response){console.log(response);fetchData();}).catch(function(err){console.log(err);});}},\"Submit\"),/*#__PURE__*/React.createElement(Button,{className:\"ml-2 mr-2\",variant:\"outline-danger\",onClick:function onClick(e){e.preventDefault();SetNewLog(null);}},\"Cancel\"))));}},/*#__PURE__*/React.createElement(FcPlus,{size:\"2em\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{className:\"ml-2 p-2 font-weight-bold\",style:{color:\"white\"}},\"Add Log\"));};export default ViewLogList;","map":{"version":3,"sources":["/var/www/Exercise_Logger/client/src/components/log/ViewLogList.js"],"names":["React","useState","useEffect","axios","Button","Accordion","Card","Table","FcPlus","useAuth0","EditableTable","ViewLogList","auth","user","isShown","SetShown","isDisplayList","SetDisplayList","isNewExercise","SetNewExercise","isCurrID","SetCurrID","isNewLog","SetNewLog","isDesc","SetDesc","fetchData","data","get","then","res","forEach","el","idx","username","email","currList","attr","hasOwnProperty","push","key","val","set","reps","weight","console","log","SetExerciseDescription","state","slice","handleDelete","e","preventDefault","length","newIndexArr","index","map","Object","entries","Header","ex","overflowX","name","title","content","textAlign","borderRadius","background","borderStyle","color","float","li","document","querySelector","value","alert","date","Date","post","target","id","getElementById","innerText","description","response","catch","err"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Button, Accordion, Card, Table } from \"react-bootstrap\";\nimport { FcPlus } from \"react-icons/fc\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport EditableTable from \"../partials/EditableTable\";\nconst ViewLogList = ({ auth }) => {\n  const { user } = useAuth0();\n  const [isShown, SetShown] = useState([]);\n  const [isDisplayList, SetDisplayList] = useState([]);\n  const [isNewExercise, SetNewExercise] = useState([]);\n  const [isCurrID, SetCurrID] = useState([]);\n  const [isNewLog, SetNewLog] = useState(null);\n  const [isDesc, SetDesc] = useState([]);\n\n  useEffect(() => {\n    if (auth) {\n      fetchData(null);\n    }\n  }, []);\n\n  const fetchData = (data) => {\n    if (data === null) {\n      axios.get(`api/logs`).then((res) => {\n        res.data.forEach((el, idx) => {\n          if (el.username === user.email) {\n            let currList = [];\n            for (let attr in el) {\n              if (el.hasOwnProperty(attr)) {\n                if (attr === \"_id\")\n                  SetCurrID((isCurrID) => [...isCurrID, el[attr]]);\n                currList.push({ key: attr, val: el[attr] });\n              }\n            }\n            SetShown((isShown) => [...isShown, false]);\n            SetDesc((isDesc) => [\n              ...isDesc,\n              {\n                set: [1],\n                reps: [1],\n                weight: [5],\n              },\n            ]);\n            SetDisplayList((isDisplayList) => [...isDisplayList, currList]);\n          }\n        });\n      });\n    } else {\n      console.log(data);\n      // axios.get(`api/logs/${data}`).then((res)=>{\n      //     res.data.forEach((el,idx)=>{\n      //         let currList = [];\n      //         for (let attr in el) {\n      //             if (el.hasOwnProperty(attr)) {\n      //                 if (attr === \"_id\")\n      //                     SetCurrID((isCurrID) => [...isCurrID, el[attr]]);\n      //                 currList.push({ key: attr, val: el[attr] });\n      //             }\n      //         }\n      //     })\n      // })\n    }\n  };\n\n  const SetExerciseDescription = (state, idx) => {\n    SetDesc((isDesc) => [\n      ...isDesc.slice(0, idx),\n      {\n        set: state.set,\n        reps: state.reps,\n        weight: state.weight,\n      },\n      ...isDesc.slice(idx + 1),\n    ]);\n  };\n  const handleDelete = (e, idx) => {\n    e.preventDefault();\n    if (isDesc.set.length > 1) {\n      let newIndexArr = [];\n      isDesc.set.forEach((el, index) => {\n        if (index > idx) {\n          newIndexArr.push(el - 1);\n        }\n      });\n      SetDesc({\n        set: [...isDesc.set.slice(0, idx), ...newIndexArr],\n        reps: [...isDesc.reps.slice(0, idx), ...isDesc.reps.slice(idx + 1)],\n        weight: [\n          ...isDesc.weight.slice(0, idx),\n          ...isDesc.weight.slice(idx + 1),\n        ],\n      });\n    } else {\n      SetDesc({\n        set: [...isDesc.set.slice(0, idx), ...isDesc.set.slice(idx + 1)],\n        reps: [...isDesc.reps.slice(0, idx), ...isDesc.reps.slice(idx + 1)],\n        weight: [\n          ...isDesc.weight.slice(0, idx),\n          ...isDesc.weight.slice(idx + 1),\n        ],\n      });\n    }\n  };\n  return (\n    <>\n      <div>\n        {isDisplayList.map((el, index) => {\n          return (\n            <Accordion\n              key={\"log-disp\" + index}\n              className={\"p-2\"}\n              defaultActiveKey=\"0\"\n            >\n              <Card>\n                {\n                  <>\n                    {Object.entries(el).map((log) => {\n                      if (log[1].key === \"title\") {\n                        return (\n                          <Accordion.Toggle\n                            as={Card.Header}\n                            eventKey=\"0\"\n                            id={\"log-title-\" + `${index}`}\n                          >\n                            {log[1].val}\n                          </Accordion.Toggle>\n                        );\n                      } else if (log[1].key === \"description\") {\n                        return (\n                          <Accordion.Collapse eventKey=\"0\">\n                            <Card.Body>\n                              <div className={\"p-2\"}>\n                                <p id={\"log-desc-\" + `${index}`}>\n                                  {log[1].key === \"description\" && log[1].val}\n                                </p>\n                              </div>\n                              <>\n                                {Object.entries(el).map((log) => {\n                                  if (log[1].key === \"exercises\") {\n                                    return (\n                                      <>\n                                        {log[1].val.map((ex) => {\n                                          return (\n                                            <div\n                                              className={\"container\"}\n                                              style={{ overflowX: \"auto\" }}\n                                            >\n                                              <h3>{ex.name}</h3>\n                                              <Table\n                                                striped\n                                                borderless\n                                                variant={\"dark\"}\n                                              >\n                                                <thead className=\"thead-dark\">\n                                                  <tr id=\"table-thead-tr\">\n                                                    <th />\n                                                    <th>Set</th>\n                                                    <th>Reps</th>\n                                                    <th>Weight</th>\n                                                  </tr>\n                                                </thead>\n                                                <tbody>\n                                                  {ex.set.map((set, idx) => {\n                                                    return (\n                                                      <tr>\n                                                        <td></td>\n                                                        <td>{set}</td>\n                                                        <td>{ex.reps[idx]}</td>\n                                                        <td>\n                                                          {ex.weight[idx]}\n                                                        </td>\n                                                      </tr>\n                                                    );\n                                                  })}\n                                                </tbody>\n                                              </Table>\n                                            </div>\n                                          );\n                                        })}\n                                      </>\n                                    );\n                                  }\n                                })}\n                              </>\n                              {isShown[index] && (\n                                <>\n                                  <div className={\"p-2 d-flex d-inline-flex\"}>\n                                    {isNewExercise[index].title}\n                                  </div>\n                                  <>{isNewExercise[index].content}</>\n                                </>\n                              )}\n                              <div\n                                className={\"d-flex d-inline-flex\"}\n                                style={{ textAlign: \"center\" }}\n                              >\n                                <button\n                                  id={index}\n                                  style={{\n                                    borderRadius: \"10vw\",\n                                    background: \"none\",\n                                    borderStyle: \"hidden\",\n                                  }}\n                                  onClick={(e) => {\n                                    SetShown((isShown) => [\n                                      ...isShown.slice(0, index),\n                                      true,\n                                      ...isShown.slice(index + 1),\n                                    ]);\n                                    e.preventDefault();\n                                    SetNewExercise((isNewExercise) => [\n                                      ...isNewExercise,\n                                      {\n                                        title: (\n                                          <input\n                                            size={5}\n                                            id={\"new-workout-name\"}\n                                          />\n                                        ),\n                                        content: (\n                                          <div>\n                                            <EditableTable\n                                              index={index}\n                                              thead={[\"Set\", \"Reps\", \"Weight\"]}\n                                              SetData={SetExerciseDescription}\n                                              style={{ color: \"black\" }}\n                                            />\n                                            <div\n                                              className={\"d-flex d-inline-flex\"}\n                                              style={{ float: \"right\" }}\n                                            >\n                                              <Button\n                                                id={index}\n                                                className={\"p-2\"}\n                                                variant={\"outline-primary\"}\n                                                onClick={(e, li) => {\n                                                  e.preventDefault();\n                                                  if (\n                                                    document.querySelector(\n                                                      \"#new-workout-name\"\n                                                    ).value === null ||\n                                                    document.querySelector(\n                                                      \"#new-workout-name\"\n                                                    ).value === \"\"\n                                                  ) {\n                                                    alert(\n                                                      \"Please provide the name\"\n                                                    );\n                                                    return;\n                                                  }\n                                                  let date = new Date();\n                                                  axios\n                                                    .post(\n                                                      `api/logs/add/${\n                                                        isCurrID[e.target.id]\n                                                      }`,\n                                                      {\n                                                        username: user.email,\n                                                        title: document.getElementById(\n                                                          \"log-title-\" +\n                                                            `${e.target.id}`\n                                                        ).innerText,\n                                                        name: document.querySelector(\n                                                          \"#new-workout-name\"\n                                                        ).value,\n                                                        description: document.getElementById(\n                                                          \"log-desc-\" +\n                                                            `${e.target.id}`\n                                                        ).innerText,\n                                                        set: isDesc.set,\n                                                        reps: isDesc.reps,\n                                                        weight: isDesc.weight,\n                                                        date: date,\n                                                      }\n                                                    )\n                                                    .then((response) => {\n                                                      console.log(response);\n                                                      fetchData(response.data);\n                                                    })\n                                                    .catch((err) => {\n                                                      console.log(err);\n                                                    });\n                                                }}\n                                              >\n                                                Submit\n                                              </Button>\n                                              <Button\n                                                className={\"ml-2\"}\n                                                variant={\"outline-danger\"}\n                                                onClick={(e) => {\n                                                  e.preventDefault();\n                                                  SetNewExercise(\n                                                    (isNewExercise) => [\n                                                      ...isNewExercise.slice(\n                                                        0,\n                                                        index\n                                                      ),\n                                                      {\n                                                        title: null,\n                                                        content: null,\n                                                      },\n                                                      ...isNewExercise.slice(\n                                                        index + 1\n                                                      ),\n                                                    ]\n                                                  );\n                                                }}\n                                              >\n                                                Cancel\n                                              </Button>\n                                            </div>\n                                          </div>\n                                        ),\n                                      },\n                                    ]);\n                                  }}\n                                >\n                                  <FcPlus size={\"2em\"} />\n                                </button>\n                                <br />\n\n                                <span\n                                  className=\"p-2 font-weight-bold\"\n                                  style={{ color: \"black\" }}\n                                >\n                                  Add New Exercise\n                                </span>\n                              </div>\n                            </Card.Body>\n                          </Accordion.Collapse>\n                        );\n                      }\n                    })}\n                  </>\n                }\n              </Card>\n\n              <Card>\n                {Object.entries(el).map((log) => {\n                  if (log[1].key === \"date\") {\n                    return log[1].val;\n                  }\n                })}\n              </Card>\n            </Accordion>\n          );\n        })}\n      </div>\n      {isNewLog}\n      <button\n        style={{\n          borderRadius: \"10vw\",\n          background: \"none\",\n          borderStyle: \"hidden\",\n        }}\n        onClick={(e) => {\n          e.preventDefault();\n          SetNewLog(\n            <>\n              <Accordion className={\"p-2\"} defaultActiveKey=\"0\">\n                <Card>\n                  <Card.Header>\n                    Title: <input id={\"new-log-title\"} />\n                  </Card.Header>\n                  <Accordion.Collapse eventKey=\"0\">\n                    <Card.Body>\n                      Description:{\" \"}\n                      <textarea\n                        cols={25}\n                        rows={10}\n                        placeholder={\n                          \"Describe any additional notes regarding this log\"\n                        }\n                        id={\"new-log-desc\"}\n                      />\n                    </Card.Body>\n                  </Accordion.Collapse>\n                </Card>\n              </Accordion>\n              <div\n                className={\"d-flex d-inline-flex\"}\n                style={{ float: \"right\" }}\n              >\n                <Button\n                  className={\"p-2\"}\n                  variant={\"outline-primary\"}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    if (\n                      document.querySelector(\"#new-log-title\").value === \"\" ||\n                      document.querySelector(\"#new-log-desc\").value === \"\"\n                    ) {\n                      alert(\"All must be filled!\");\n                    }\n\n                    console.log(\n                      \"LOG TITLE\",\n                      document.querySelector(\"#new-log-title\").value\n                    );\n                    console.log(\n                      \"LOG DESC\",\n                      document.querySelector(\"#new-log-desc\").value\n                    );\n                    let date = new Date();\n                    //add new log\n                    axios\n                      .post(`api/logs/create`, {\n                        username: user.email,\n                        title: document.querySelector(\"#new-log-title\").value,\n                        description: document.querySelector(\"#new-log-desc\")\n                          .value,\n                        date: date,\n                      })\n                      .then((response) => {\n                        console.log(response);\n                        fetchData();\n                      })\n                      .catch((err) => {\n                        console.log(err);\n                      });\n                  }}\n                >\n                  Submit\n                </Button>\n                <Button\n                  className={\"ml-2 mr-2\"}\n                  variant={\"outline-danger\"}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    SetNewLog(null);\n                  }}\n                >\n                  Cancel\n                </Button>\n              </div>\n            </>\n          );\n        }}\n      >\n        <FcPlus size={\"2em\"} />\n      </button>\n      <br />\n\n      <span className=\"ml-2 p-2 font-weight-bold\" style={{ color: \"white\" }}>\n        Add Log\n      </span>\n    </>\n  );\n};\nexport default ViewLogList;\n"]},"metadata":{},"sourceType":"module"}