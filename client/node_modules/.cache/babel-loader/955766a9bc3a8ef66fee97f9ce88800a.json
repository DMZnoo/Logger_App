{"ast":null,"code":"import _toConsumableArray from\"/var/www/Exercise_Logger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/var/www/Exercise_Logger/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Button,Accordion,Card,Table}from\"react-bootstrap\";import{FcPlus}from\"react-icons/fc\";import{useAuth0}from\"@auth0/auth0-react\";import EditableTable from\"../partials/EditableTable\";var ViewLogList=function ViewLogList(_ref){var auth=_ref.auth;var _useAuth=useAuth0(),user=_useAuth.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),isShown=_useState2[0],SetShown=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),isDisplayList=_useState4[0],SetDisplayList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),isNewExercise=_useState6[0],SetNewExercise=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),isCurrID=_useState8[0],SetCurrID=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),isNewLog=_useState10[0],SetNewLog=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),isWorkoutDesc=_useState12[0],SetWorkoutDesc=_useState12[1];useEffect(function(){if(auth){fetchData();}},[]);var fetchData=function fetchData(){axios.get(\"api/logs\").then(function(res){res.data.forEach(function(el,idx){if(el.username===user.email){var currList=[];var _loop=function _loop(attr){if(el.hasOwnProperty(attr)){if(attr===\"_id\")SetCurrID(function(isCurrID){return[].concat(_toConsumableArray(isCurrID),[el[attr]]);});currList.push({key:attr,val:el[attr]});}};for(var attr in el){_loop(attr);}SetShown(function(isShown){return[].concat(_toConsumableArray(isShown),[false]);});SetDisplayList(function(isDisplayList){return[].concat(_toConsumableArray(isDisplayList),[currList]);});}});}).catch(function(err){return console.log(err);});};var SetExerciseDescription=function SetExerciseDescription(state,idx){SetWorkoutDesc(function(isWorkoutDesc){return[].concat(_toConsumableArray(isWorkoutDesc.slice(0,idx)),[state],_toConsumableArray(isWorkoutDesc.slice(idx+1)));});console.log(isWorkoutDesc[idx]);};var handleDelete=function handleDelete(e,idx){e.preventDefault();if(isWorkoutDesc.set.length>1){var newIndexArr=[];isWorkoutDesc.set.forEach(function(el,index){if(index>idx){newIndexArr.push(el-1);}});SetWorkoutDesc({set:[].concat(_toConsumableArray(isWorkoutDesc.set.slice(0,idx)),newIndexArr),reps:[].concat(_toConsumableArray(isWorkoutDesc.reps.slice(0,idx)),_toConsumableArray(isWorkoutDesc.reps.slice(idx+1))),weight:[].concat(_toConsumableArray(isWorkoutDesc.weight.slice(0,idx)),_toConsumableArray(isWorkoutDesc.weight.slice(idx+1)))});}else{SetWorkoutDesc({set:[].concat(_toConsumableArray(isWorkoutDesc.set.slice(0,idx)),_toConsumableArray(isWorkoutDesc.set.slice(idx+1))),reps:[].concat(_toConsumableArray(isWorkoutDesc.reps.slice(0,idx)),_toConsumableArray(isWorkoutDesc.reps.slice(idx+1))),weight:[].concat(_toConsumableArray(isWorkoutDesc.weight.slice(0,idx)),_toConsumableArray(isWorkoutDesc.weight.slice(idx+1)))});}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,isDisplayList.map(function(el,index){return/*#__PURE__*/React.createElement(Accordion,{key:\"log-disp\"+index,className:\"p-2\",defaultActiveKey:\"0\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(React.Fragment,null,Object.entries(el).map(function(log){if(log[1].key===\"title\"){return/*#__PURE__*/React.createElement(Accordion.Toggle,{as:Card.Header,eventKey:\"0\",id:\"log-title-\"+\"\".concat(index)},log[1].val);}else if(log[1].key===\"description\"){return/*#__PURE__*/React.createElement(Accordion.Collapse,{eventKey:\"0\"},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(\"div\",{className:\"p-2\"},/*#__PURE__*/React.createElement(\"p\",{id:\"log-desc-\"+\"\".concat(index)},log[1].key===\"description\"&&log[1].val)),/*#__PURE__*/React.createElement(React.Fragment,null,Object.entries(el).map(function(log){if(log[1].key===\"exercises\"){return/*#__PURE__*/React.createElement(React.Fragment,null,log[1].val.map(function(ex){return/*#__PURE__*/React.createElement(\"div\",{className:\"container\",style:{overflowX:\"auto\"}},/*#__PURE__*/React.createElement(\"h3\",null,ex.name),/*#__PURE__*/React.createElement(Table,{striped:true,borderless:true,variant:\"dark\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",{id:\"table-thead-tr\"},/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null,\"Set\"),/*#__PURE__*/React.createElement(\"th\",null,\"Reps\"),/*#__PURE__*/React.createElement(\"th\",null,\"Weight\"))),/*#__PURE__*/React.createElement(\"tbody\",null,ex.set.map(function(set,idx){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null,set),/*#__PURE__*/React.createElement(\"td\",null,ex.reps[idx]),/*#__PURE__*/React.createElement(\"td\",null,ex.weight[idx]));}))));}));}})),isShown[index]&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 ml-2 d-flex d-inline-flex\"},/*#__PURE__*/React.createElement(\"input\",{size:25,id:\"new-workout-name\"+\"\".concat(index)})),/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(EditableTable,{index:index,thead:[\"Set\",\"Reps\",\"Weight\"],SetData:SetExerciseDescription,style:{color:\"black\"}}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex d-inline-flex\",style:{float:\"right\"}},/*#__PURE__*/React.createElement(Button,{id:index,className:\"p-2\",variant:\"outline-primary\",onClick:function onClick(e){// e.preventDefault();\nvar logTitle=document.getElementById(\"log-title-\"+\"\".concat(e.target.id)).innerText;var exerciseName=document.querySelector(\"#new-workout-name\"+\"\".concat(e.target.id)).value;var logDesc=document.getElementById(\"log-desc-\"+\"\".concat(e.target.id)).innerText;if(exerciseName===null||exerciseName===\"\"){alert(\"Please provide the name\");return;}var date=new Date();axios.post(\"api/logs/add/\".concat(isCurrID[e.target.id]),{username:user.email,title:logTitle,name:exerciseName,description:logDesc,set:isWorkoutDesc[e.target.id].set,reps:isWorkoutDesc[e.target.id].reps,weight:isWorkoutDesc[e.target.id].weight,date:date}).then(function(response){console.log(response);}).catch(function(err){console.log(err);});window.location.reload();}},\"Submit\"),/*#__PURE__*/React.createElement(Button,{className:\"ml-2\",variant:\"outline-danger\",onClick:function onClick(e){e.preventDefault();SetNewExercise(function(isNewExercise){return[].concat(_toConsumableArray(isNewExercise.slice(0,index)),_toConsumableArray(isNewExercise.slice(index+1)));});SetShown(function(isShown){return[].concat(_toConsumableArray(isShown.slice(0,index)),[false],_toConsumableArray(isShown.slice(index+1)));});}},\"Cancel\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex d-inline-flex\",style:{textAlign:\"center\"}},/*#__PURE__*/React.createElement(\"button\",{id:index,style:{borderRadius:\"10vw\",background:\"none\",borderStyle:\"hidden\"},onClick:function onClick(e){e.preventDefault();SetShown(function(isShown){return[].concat(_toConsumableArray(isShown.slice(0,index)),[true],_toConsumableArray(isShown.slice(index+1)));});}},/*#__PURE__*/React.createElement(FcPlus,{size:\"2em\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{className:\"p-2 font-weight-bold\",style:{color:\"black\"}},\"Add New Exercise\"))));}}))),/*#__PURE__*/React.createElement(Card,null,Object.entries(el).map(function(log){if(log[1].key===\"date\"){return log[1].val;}})));})),isNewLog,/*#__PURE__*/React.createElement(\"button\",{style:{borderRadius:\"10vw\",background:\"none\",borderStyle:\"hidden\"},onClick:function onClick(e){e.preventDefault();SetNewLog(/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Accordion,{className:\"p-2\",defaultActiveKey:\"0\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Card.Header,null,\"Title: \",/*#__PURE__*/React.createElement(\"input\",{id:\"new-log-title\"})),/*#__PURE__*/React.createElement(Accordion.Collapse,{eventKey:\"0\"},/*#__PURE__*/React.createElement(Card.Body,null,\"Description:\",\" \",/*#__PURE__*/React.createElement(\"textarea\",{cols:25,rows:10,placeholder:\"Describe any additional notes regarding this log\",id:\"new-log-desc\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex d-inline-flex\",style:{float:\"right\"}},/*#__PURE__*/React.createElement(Button,{className:\"p-2\",variant:\"outline-primary\",onClick:function onClick(e){e.preventDefault();if(document.querySelector(\"#new-log-title\").value===\"\"||document.querySelector(\"#new-log-desc\").value===\"\"){alert(\"All must be filled!\");}console.log(\"LOG TITLE\",document.querySelector(\"#new-log-title\").value);console.log(\"LOG DESC\",document.querySelector(\"#new-log-desc\").value);var date=new Date();//add new log\naxios.post(\"api/logs/create\",{username:user.email,title:document.querySelector(\"#new-log-title\").value,description:document.querySelector(\"#new-log-desc\").value,date:date}).then(function(response){console.log(response);window.location.reload();}).catch(function(err){console.log(err);});}},\"Submit\"),/*#__PURE__*/React.createElement(Button,{className:\"ml-2 mr-2\",variant:\"outline-danger\",onClick:function onClick(e){e.preventDefault();SetNewLog(null);}},\"Cancel\"))));}},/*#__PURE__*/React.createElement(FcPlus,{size:\"2em\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{className:\"ml-2 p-2 font-weight-bold\",style:{color:\"white\"}},\"Add Log\"));};export default ViewLogList;","map":{"version":3,"sources":["/var/www/Exercise_Logger/client/src/components/log/ViewLogList.js"],"names":["React","useState","useEffect","axios","Button","Accordion","Card","Table","FcPlus","useAuth0","EditableTable","ViewLogList","auth","user","isShown","SetShown","isDisplayList","SetDisplayList","isNewExercise","SetNewExercise","isCurrID","SetCurrID","isNewLog","SetNewLog","isWorkoutDesc","SetWorkoutDesc","fetchData","get","then","res","data","forEach","el","idx","username","email","currList","attr","hasOwnProperty","push","key","val","catch","err","console","log","SetExerciseDescription","state","slice","handleDelete","e","preventDefault","set","length","newIndexArr","index","reps","weight","map","Object","entries","Header","ex","overflowX","name","color","float","logTitle","document","getElementById","target","id","innerText","exerciseName","querySelector","value","logDesc","alert","date","Date","post","title","description","response","window","location","reload","textAlign","borderRadius","background","borderStyle"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Button, Accordion, Card, Table } from \"react-bootstrap\";\nimport { FcPlus } from \"react-icons/fc\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport EditableTable from \"../partials/EditableTable\";\nconst ViewLogList = ({ auth }) => {\n  const { user } = useAuth0();\n  const [isShown, SetShown] = useState([]);\n  const [isDisplayList, SetDisplayList] = useState([]);\n  const [isNewExercise, SetNewExercise] = useState([]);\n  const [isCurrID, SetCurrID] = useState([]);\n  const [isNewLog, SetNewLog] = useState(null);\n  const [isWorkoutDesc, SetWorkoutDesc] = useState([]);\n\n  useEffect(() => {\n    if (auth) {\n      fetchData();\n    }\n  }, []);\n\n  const fetchData = () => {\n      axios.get(`api/logs`).then((res) => {\n        res.data.forEach((el, idx) => {\n          if (el.username === user.email) {\n            let currList = [];\n            for (let attr in el) {\n              if (el.hasOwnProperty(attr)) {\n                if (attr === \"_id\")\n                  SetCurrID((isCurrID) => [...isCurrID, el[attr]]);\n                currList.push({ key: attr, val: el[attr] });\n              }\n            }\n            SetShown((isShown) => [...isShown, false]);\n            SetDisplayList((isDisplayList) => [...isDisplayList, currList]);\n          }\n        });\n      }).catch(err=>console.log(err));\n  };\n\n  const SetExerciseDescription = (state, idx) => {\n    SetWorkoutDesc((isWorkoutDesc) => [\n      ...isWorkoutDesc.slice(0, idx),\n      state,\n      ...isWorkoutDesc.slice(idx + 1),\n    ]);\n\n    console.log(isWorkoutDesc[idx]);\n  };\n  const handleDelete = (e, idx) => {\n    e.preventDefault();\n    if (isWorkoutDesc.set.length > 1) {\n      let newIndexArr = [];\n      isWorkoutDesc.set.forEach((el, index) => {\n        if (index > idx) {\n          newIndexArr.push(el - 1);\n        }\n      });\n      SetWorkoutDesc({\n        set: [...isWorkoutDesc.set.slice(0, idx), ...newIndexArr],\n        reps: [\n          ...isWorkoutDesc.reps.slice(0, idx),\n          ...isWorkoutDesc.reps.slice(idx + 1),\n        ],\n        weight: [\n          ...isWorkoutDesc.weight.slice(0, idx),\n          ...isWorkoutDesc.weight.slice(idx + 1),\n        ],\n      });\n    } else {\n      SetWorkoutDesc({\n        set: [\n          ...isWorkoutDesc.set.slice(0, idx),\n          ...isWorkoutDesc.set.slice(idx + 1),\n        ],\n        reps: [\n          ...isWorkoutDesc.reps.slice(0, idx),\n          ...isWorkoutDesc.reps.slice(idx + 1),\n        ],\n        weight: [\n          ...isWorkoutDesc.weight.slice(0, idx),\n          ...isWorkoutDesc.weight.slice(idx + 1),\n        ],\n      });\n    }\n  };\n  return (\n    <>\n      <div>\n        {isDisplayList.map((el, index) => {\n          return (\n            <Accordion\n              key={\"log-disp\" + index}\n              className={\"p-2\"}\n              defaultActiveKey=\"0\"\n            >\n              <Card>\n                {\n                  <>\n                    {Object.entries(el).map((log) => {\n                      if (log[1].key === \"title\") {\n                        return (\n                          <Accordion.Toggle\n                            as={Card.Header}\n                            eventKey=\"0\"\n                            id={\"log-title-\" + `${index}`}\n                          >\n                            {log[1].val}\n                          </Accordion.Toggle>\n                        );\n                      } else if (log[1].key === \"description\") {\n                        return (\n                          <Accordion.Collapse eventKey=\"0\">\n                            <Card.Body>\n                              <div className={\"p-2\"}>\n                                <p id={\"log-desc-\" + `${index}`}>\n                                  {log[1].key === \"description\" && log[1].val}\n                                </p>\n                              </div>\n                              <>\n                                {Object.entries(el).map((log) => {\n                                  if (log[1].key === \"exercises\") {\n                                    return (\n                                      <>\n                                        {log[1].val.map((ex) => {\n                                          return (\n                                            <div\n                                              className={\"container\"}\n                                              style={{ overflowX: \"auto\" }}\n                                            >\n                                              <h3>{ex.name}</h3>\n                                              <Table\n                                                striped\n                                                borderless\n                                                variant={\"dark\"}\n                                              >\n                                                <thead className=\"thead-dark\">\n                                                  <tr id=\"table-thead-tr\">\n                                                    <th />\n                                                    <th>Set</th>\n                                                    <th>Reps</th>\n                                                    <th>Weight</th>\n                                                  </tr>\n                                                </thead>\n                                                <tbody>\n                                                  {ex.set.map((set, idx) => {\n                                                    return (\n                                                      <tr>\n                                                        <td></td>\n                                                        <td>{set}</td>\n                                                        <td>{ex.reps[idx]}</td>\n                                                        <td>\n                                                          {ex.weight[idx]}\n                                                        </td>\n                                                      </tr>\n                                                    );\n                                                  })}\n                                                </tbody>\n                                              </Table>\n                                            </div>\n                                          );\n                                        })}\n                                      </>\n                                    );\n                                  }\n                                })}\n                              </>\n                              {isShown[index] && (\n                                <>\n                                  <div\n                                    className={\"p-2 ml-2 d-flex d-inline-flex\"}\n                                  >\n                                    <input\n                                      size={25}\n                                      id={\"new-workout-name\" + `${index}`}\n                                    />\n                                  </div>\n                                  <>\n                                    <div>\n                                      <EditableTable\n                                        index={index}\n                                        thead={[\"Set\", \"Reps\", \"Weight\"]}\n                                        SetData={SetExerciseDescription}\n                                        style={{ color: \"black\" }}\n                                      />\n                                      <div\n                                        className={\"d-flex d-inline-flex\"}\n                                        style={{ float: \"right\" }}\n                                      >\n                                        <Button\n                                          id={index}\n                                          className={\"p-2\"}\n                                          variant={\"outline-primary\"}\n                                          onClick={(e) => {\n                                            // e.preventDefault();\n                                            let logTitle = document.getElementById(\n                                              \"log-title-\" + `${e.target.id}`\n                                            ).innerText;\n                                            let exerciseName = document.querySelector(\n                                              \"#new-workout-name\" +\n                                                `${e.target.id}`\n                                            ).value;\n                                            let logDesc = document.getElementById(\n                                              \"log-desc-\" + `${e.target.id}`\n                                            ).innerText;\n                                            if (\n                                              exerciseName === null ||\n                                              exerciseName === \"\"\n                                            ) {\n                                              alert(\"Please provide the name\");\n                                              return;\n                                            }\n                                            let date = new Date();\n                                            axios\n                                              .post(\n                                                `api/logs/add/${\n                                                  isCurrID[e.target.id]\n                                                }`,\n                                                {\n                                                  username: user.email,\n                                                  title: logTitle,\n                                                  name: exerciseName,\n                                                  description: logDesc,\n                                                  set:\n                                                    isWorkoutDesc[e.target.id]\n                                                      .set,\n                                                  reps:\n                                                    isWorkoutDesc[e.target.id]\n                                                      .reps,\n                                                  weight:\n                                                    isWorkoutDesc[e.target.id]\n                                                      .weight,\n                                                  date: date,\n                                                }\n                                              )\n                                              .then((response) => {\n                                                console.log(response);\n                                              })\n                                              .catch((err) => {\n                                                console.log(err);\n                                              });\n\t\t\t\t\twindow.location.reload();\n                                          }}\n                                        >\n                                          Submit\n                                        </Button>\n                                        <Button\n                                          className={\"ml-2\"}\n                                          variant={\"outline-danger\"}\n                                          onClick={(e) => {\n                                            e.preventDefault();\n                                            SetNewExercise((isNewExercise) => [\n                                              ...isNewExercise.slice(0, index),\n                                              ...isNewExercise.slice(index + 1),\n                                            ]);\n                                            SetShown((isShown) => [\n                                              ...isShown.slice(0, index),\n                                              false,\n                                              ...isShown.slice(index + 1),\n                                            ]);\n                                          }}\n                                        >\n                                          Cancel\n                                        </Button>\n                                      </div>\n                                    </div>\n                                  </>\n                                </>\n                              )}\n                              <div\n                                className={\"d-flex d-inline-flex\"}\n                                style={{ textAlign: \"center\" }}\n                              >\n                                <button\n                                  id={index}\n                                  style={{\n                                    borderRadius: \"10vw\",\n                                    background: \"none\",\n                                    borderStyle: \"hidden\",\n                                  }}\n                                  onClick={(e) => {\n                                    e.preventDefault();\n\n                                    SetShown((isShown) => [\n                                      ...isShown.slice(0, index),\n                                      true,\n                                      ...isShown.slice(index + 1),\n                                    ]);\n\n                                  }}\n                                >\n                                  <FcPlus size={\"2em\"} />\n                                </button>\n                                <br />\n                                <span\n                                  className=\"p-2 font-weight-bold\"\n                                  style={{ color: \"black\" }}\n                                >\n                                  Add New Exercise\n                                </span>\n                              </div>\n                            </Card.Body>\n                          </Accordion.Collapse>\n                        );\n                      }\n                    })}\n                  </>\n                }\n              </Card>\n\n              <Card>\n                {Object.entries(el).map((log) => {\n                  if (log[1].key === \"date\") {\n                    return log[1].val;\n                  }\n                })}\n              </Card>\n            </Accordion>\n          );\n        })}\n      </div>\n      {isNewLog}\n      <button\n        style={{\n          borderRadius: \"10vw\",\n          background: \"none\",\n          borderStyle: \"hidden\",\n        }}\n        onClick={(e) => {\n          e.preventDefault();\n          SetNewLog(\n            <>\n              <Accordion className={\"p-2\"} defaultActiveKey=\"0\">\n                <Card>\n                  <Card.Header>\n                    Title: <input id={\"new-log-title\"} />\n                  </Card.Header>\n                  <Accordion.Collapse eventKey=\"0\">\n                    <Card.Body>\n                      Description:{\" \"}\n                      <textarea\n                        cols={25}\n                        rows={10}\n                        placeholder={\n                          \"Describe any additional notes regarding this log\"\n                        }\n                        id={\"new-log-desc\"}\n                      />\n                    </Card.Body>\n                  </Accordion.Collapse>\n                </Card>\n              </Accordion>\n              <div\n                className={\"d-flex d-inline-flex\"}\n                style={{ float: \"right\" }}\n              >\n                <Button\n                  className={\"p-2\"}\n                  variant={\"outline-primary\"}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    if (\n                      document.querySelector(\"#new-log-title\").value === \"\" ||\n                      document.querySelector(\"#new-log-desc\").value === \"\"\n                    ) {\n                      alert(\"All must be filled!\");\n                    }\n\n                    console.log(\n                      \"LOG TITLE\",\n                      document.querySelector(\"#new-log-title\").value\n                    );\n                    console.log(\n                      \"LOG DESC\",\n                      document.querySelector(\"#new-log-desc\").value\n                    );\n                    let date = new Date();\n                    //add new log\n                    axios\n                      .post(`api/logs/create`, {\n                        username: user.email,\n                        title: document.querySelector(\"#new-log-title\").value,\n                        description: document.querySelector(\"#new-log-desc\")\n                          .value,\n                        date: date,\n                      })\n                      .then((response) => {\n                        console.log(response);\n                        window.location.reload();\n\t\t      })\n                      .catch((err) => {\n                        console.log(err);\n                      });\n                  }}\n                >\n                  Submit\n                </Button>\n                <Button\n                  className={\"ml-2 mr-2\"}\n                  variant={\"outline-danger\"}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    SetNewLog(null);\n                  }}\n                >\n                  Cancel\n                </Button>\n              </div>\n            </>\n          );\n        }}\n      >\n        <FcPlus size={\"2em\"} />\n      </button>\n      <br />\n\n      <span className=\"ml-2 p-2 font-weight-bold\" style={{ color: \"white\" }}>\n        Add Log\n      </span>\n    </>\n  );\n};\nexport default ViewLogList;\n"]},"metadata":{},"sourceType":"module"}